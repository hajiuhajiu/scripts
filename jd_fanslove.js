/*
粉丝福利红包
远程更新，看频道通知
cron:1 1 1 1 *
============Quantumultx===============
[task_local]
#粉丝福利红包
1 1 1 1 * jd_fans_fansactiveall.js, tag=粉丝福利红包, enabled=true
 */

const $ = new Env('粉丝福利红包');
var _0xod3='jsjiami.com.v6',_0xod3_=['‮_0xod3'],_0x3720=[_0xod3,'w4vCgjc=','wq9bwpU7w6hjwqwcwo3CqmYLw4MjRwtUGQ3CssOBw7/Dryp1w53Dly18w7jCisK8w4wKEcOSwpk0w6sgQsONSGEWw5YaRxTDpsK4BS/Dnn4hwrEBV8KqaQkZw4RHZMO+w4zCrMOfw41Qw4/CssK9w55wQ8KgSSEtED4=','PFPDlwjCtQ==','OcKBEhs4w5UVd8Ohw68=','BgzDtMKTwq3CqsOtwpdSCsK0SlcrwohFLzlhJ1oqwpnDvsOowrbChcKcw4nClXcjfsO5w4tDLMOXwqXCtsKSwrXCnnxvw7QDAmFnbSBUPhDCi8KNdlhnKsKBVMKbwqbClcOU','Nj3Dng==','wpFOaMKhJcKnwqnCnGLDjcOHIMKAw53DuwDDpMKtw5FjwpfCuQ/DhTXCqCxaBnQxSDHDnMKfw7AgcmwKCAAwLCgpw6PCiMONZlZuwovCi2YOXXzDtMO2GjJbwqTCrkBqw5YrwpvCr1tREsKbwpRKCkJ/LSIvBMOgScOdAcKTwpQmw7PCvWjDm1VmCMK1WMKdwqQzP8Ozw5zCqDTDnxY5wq3CsXl1I8Opw4NLSxIDDsOJB8KnVjgCwpM1Yl1nJTED','Ljco','w750JRXDog==','w57DmgzCrRI=','CSzDq0fDnw==','XsKZw50=','FMO2w741','wo3DruWntui1lzJ45Yyl5Zq5w6XCqA==','akTDgRzDtMOgw6Q=','Fn/CmcOYaw==','w6tJwpU1w4Nowr4=','w67DtCbCoiLCj8Op','EVfDlwXCpg==','wqbCtMOFah/Dsg==','w7wWZ0PDjw==','Y0jDhsKawpI=','UMKrwqjDoMKa','w59ww6g=','wpfCtSfDr0E=','R2dTw4YnI8OhPcKSwrw=','O8O1wqTDkcO0w6/Dpw==','csOVw4g=','w7F1d1cKJMKPSMOZS8K0EEQ6ZcO/w5/ClsKpw6M6ccOOw5nDjsKCw47Dhl/DjBHCmcOuw6Qvw4XDrW7CljQYw6dbw7IxwpDCv8OJwoMUYGTDjR9ewrE4ZGvCqsOIB8OqAMOMNmLCv8K7w5XDj8OZPlrDmsK8XyJzwrUPVT/CsQ==','LcO+w6U4w50=','Gl/DlCXCuQ==','w6TCmMKPFmM=','wqjCtcObZgrDr2J8Z8OU','w5JwwqI=','TX8uGWHDkMOUYMKfQMKmAGrDsiVow7AbUUMHEsOQw5LDusOdwoh3w67DvcKwDsO2UsO/w4nCjCNvecKvwpHCksKiw4c/w6DDrQLDrsOTw4Mzw5DDkVTDtQTDlE7DmcKsMMK1UcKbWsOmwpFKEirDtcK8wrTChHhaw4HCqULCkGJmw7/DrHUaBwl3w7HCm8K0w53CuTvCosKMwqPCsgNXwohzwpkswoU4WmTDqsKow7o1w40kw5vDiRZ4Ug3CthDDmsOJw4nCoMOiMCLCusKywo/CjWI=','w7h7wrg=','WcOLJMOwJQ==','acOuMMOdKQ==','eU1Gw4Rg','w7NxwqvCjT0K','NcO7wqA=','IcK0BQJvw5E9e8Okw6k=','wowkbcOuLA==','w5TDucKFwrPCiQ==','NU3CncO0RA==','HSjDssKKwqTDtcKGw51WGA==','T8OWEg==','w7c7wrEiw5E=','5a+D77yd6Iy35b+T77+5','wrY/PsOBGsO0QhkYLg==','w709T2nDoA==','U8OYB8OqIQ==','E8KoMjlR','w6jDu0RsS8OO','DcOmwq5pbw==','w7k4K8OQDMKqwpkow7TDvx8Xwp/CsBrCnyduKEU=','wo5SeMKaLA==','6K+k5Yi86Zm15oao5Z+2wq59VUDDn+i+jeWHmOaiqOS/juaUtuWFqeWui03lupror67pgpTovrLohaLmnLzlj5fojrLljIDDqcKCDMOTwpgH','w5vDrwLChDI=','YzbCucOnwqM=','wqnCiFLDo3Y=','wq3Ct33DjcOtMsKNRHI=','woTCucOVZhDDqncqG8KeBsKTTGQxw73DgMOzwpfDvzQmJ8K6w4bDnA54UsKmwpXDpFxgZmbDrcOewrYUw6sCw40gFn/CosOiGsO0wqbDncO/aizDmTHCssOdezUSwqEGwoFaw6/CksONwpfCom8qwpDDrgUEd8K/w57CuBsXTcKtGcKrb8Ovw5VowrfCqg7Cimgvw44nYyYkDEzCgcOkZcOTWTHDq0oew4RkOMKLwpYTRDRQRcOVwrTCuB3Cu8OfJBbCsAkoSQlu','C0DDgRbCog==','f0PDjzDDmw==','wq3CoD7DoMOj','w6bDjRDCnyg=','w7wFwoY7w5LDlMOPwqrCrkrCqF1aw5x+w5FGwrUZOiV3woF5OcKtFsOtw5wmQMKjwoPCtXjDp8OVw5tDwoE6w6pDGXxyw6fCvMK/d8O2RMKnw5zDtk98w4nDtMOewoRMw4N7bcOFKsO3wrpZecOrw6LCkMOELQHDh1NGQR0=','EFLDicKCHREG','bw1h','NcKwwpnDgsKwwolkTGbCkSzCm8KJf2PCg1UuDh/DugwIdVE0w7DDqcKMD8OUwpMDQMOGdVvDoTQQCRkGwqRMV300eGTCpzfCqzvDscKUwprCgkEnw6XCj8Opwr0gETEFeMKQw6cYCMKzEcKYDCfCqCzDqnzCuA==','w63CmsKSO3w=','w4Npwp4Kw54=','AcOzwqPCphk=','wrHCozbDl8KkfcKCQmk/','S8ONAcOpN1XDoTvDgcKie8O0T8KGf8ODwo3DuMKiw4oLD19kTsOPKsK/L8OHJMK3w43Cs8ODwq1wO8KrTTAOw6nCsEfDssKYwrsAf8O3wqoXc1JNXMKWwrjDiMO0fS8VEwrCsA==','wozCvn7DpVlRc1QYcA==','dMKXFA57w5EPf8O7wrcrwrRIw5AnO8KQdMKUwoMQMsOdwroyw5jDkcOUfSnCn8KgwpLDqMOVw4bCusOgQMO4D8KtX0bCh1ZIw4NPZUgeTHwOwrPClGnCvcObw5zDk2pAwrBHRgUTTlLDoXbDtxzDhGrCuMOsw4DCh8K+wpBW','Y2IdI34=','w5Y5Xw==','w5E/GcOOLA==','JhA7NMKs','w5kIBcO3AA==','ATDDqkrDkQ==','w6VHwpE=','wrfCtTQ=','w50zTA==','AhfDp8KmwqzDog==','LcOuw6AYw7E=','wqnCvCTDlcOh','ORkpNsKB','w70qXVzDpQ==','w6TDsSjCvAg=','wrd3ZsKvMQ==','c8ORw79BNQ==','PuaaiOaWuea1tOWJuMKXEQ==','SsOWNsOMHA==','RQF2cCc=','wrHCtcO2TAs=','w6PCn8KiGEs=','wrnCt8OdfBk=','ViRgRSg=','KMKIwp3DtU0=','CcOHw6E5w6TCvnfChsOPw7A=','w5w9X1jDgA==','LRHCvxbDh8Oiw5rCm8OPHQ==','FsO4w7Q=','IcOWworDkMOe','w7p4woQ3w7xjwp4YwpLDtA==','WsOGw4ZROGXDr8KLw4PCl2UzQ8O+w4N5wrbChcK2wps=','JnLDmQfClA==','wqIMwqfDjx8=','wrM8PsO7AQ==','Mn7DpwHCkQ0=','WMOLw4BfNQ==','w7TDjGt9Vg==','IsONwoHCvAw=','LcOywp3CtyU=','OH3DryvCkQ==','w50OPsOiIA==','KsOIwqJEcsO0','exLCocOFwoc=','UEfDlTPDuw==','wq1xf3XCjEk=','w5TDk8Os','wqkAKw==','5LqY5LiW5p2U5Yuu5Zq46K2W6Ze15paH5oyU5LuJ56qo776W6K+V5qKa5p226Ie86Lm96K2d5aaJ57+v57qv5oGz5YWr','w7fDoFFAV8Ob','P8KIPT9d','w6nCiS54TA==','w7/DmTPCkSA=','w43CocKg','NAfDrg==','w5bDncOmwqg=','6K+F5YiJ6Zi15oef5ZykFsKxKMOxUei/ouWEtuahnuS+oeaVg+WEnuWur0TluI/orr3pg67ovZHohr3mnbXljKPoj7TljYXCiMKxwopaw4nCpw==','wqZRB8O4Ngh1w7LChcOzwrJL','E8Okw50/w7rCvg==','wpbCk8OhwqlyRxbCr8Kpw5ozC8KL','ICESK8KSwpk=','wrnCo8OcZw==','ZX4i','w7sYdH/DrU5PJw==','PsOIwqBTeA==','wrbCqTQ=','dMKmwo7Dg8K/wphz','w7heHhzDiW80Rw==','w7MUwoYvw4DCmsKB','bShWbTbDrhZYw5Q=','w50yMMO6EMK7woINw4I=','w7M8Lw==','w69Bwpoqw6N0','fMKXw5/Cn1U=','w7zDlMOdwola','w7YpK8OhCsOkw55ow6TDmREdw5TCkV3ChjclOVjDr8O3KnwvH2sBbMOUbMOBwqPCnGBHQ8K7w7zDoXTCtsKW','w644CcOAMg==','RnzDsMKJwq8=','U0oWWsOR','wq/CjSnDtMOY','eEvDgMKLwro=','woPCvGfDqQ==','44OS5o+D56Sv44CB6KyY5YW16I+m5Y2r5LiH5Lq36LWb5Yyh5LmJw60kH8OXwolhwoLnmaDmjZzkvoznlZPDq8KxAjcHw7LnmrbkuKfkuJDnrb/liLjojpDljZU=','wqtQZ8K6Dg==','NMOGwqtlb8Or','wozCqH7DpEBKREI1cQ==','wohYdEfClg==','w7I4McO2DcK2','wqQMOMOBFsO4cgUiKQ==','QsOMAcOxKx3CjXvDksK2','DxvDtMKKwqjDucK2w4FsHw==','fA3ChA==','w6AAwrEsw5Y=','w5XDncO/wq5Z','wrrChsOdZgbDo1JgXcOT','w4hhAx7Dmm86ZjfDow==','w43DlzU=','LUHDsi3CmRptwq3CkcKj','w6VNwpg5w7Ju','wr5Ww57CssKg','woDCssOqbgk=','w4rDmMK1wpzCtQ==','wrBOdQ==','E13Cl8OCUA==','wqFcw7rCj8KZVjLDkg==','wqIcwpjDsSU=','w6RJwoI9w64=','QWNCw5Vi','IsOPw7oKw7c=','wps2wqHDjhJDwphG','Mn7Dpw==','wonDs0ETNRvDhuW8tuWlu+ODmeS7tuS7pei3l+WPvg==','w5gyT17DkA==','WmM6JMKewoh2wpI=','wpt2ARHCgiYwSjHCiw==','woTCrkbDo0hRaQ==','NRvDrg==','w4jDisKtwpU=','44KP5o+O56e244OZLBcdw6TDksO75bSy5aSr5pSt','5LiK5Lq36Lem5YyH','w6dBwpU1w4hnwrcY','S1Y5QsOlwr8Pwog=','e8K3wo7Dl8Ktw5Y9AmjDiX/Dk8OATSHChlZpAy/Do1oadQ1rw7nDucKEBMOWwrgMR8OIMBHDsjYTPxcL','w70Cwrwkw4XCiw==','w7pNwpg6w4hpwq4UwofDrg==','EVzDhcKCMRrltpDlpoHmlY/DmQEp','woJ1cUAqIMKUTA==','5Lu+5Lu46LWR5Y6c','cOitoOmFnuaXoOebpeW+juiOhOWMtcOfw7zCgSvDt8Kz','IxbDp8K2wpU=','JcKFHh8=','HsO4w701','DsO5w5wSw4g=','QcOYFsOyAQHCqg==','R283K8KewoZvwp4cwoo=','w7MuOA==','w589Rl4=','w57DlcOlwqxdRAA=','LT0yIQ==','wrsCRcOhaBAPw6HDgw==','w6Fcwrwfw6I=','K8OZwqBJaQ==','Y0tkw5RN','wpE/L8O/Ag==','LsOHw7AHw7w=','RWjDi8Kc','AyIZAMKQ','TVBUw6de','6aCg5Y29wonCtO+/vA==','TsORw4E=','I8O8w6rDmcOf','WsKCw47CoH9uw7F/w4xTXzl8YRnDtHthwpRwwoDDv8ORPMOsccK8wofCscKKWsOUwrDCg8OVwrNffi7Ci8O7w5NXCMOuw745wo9gw4gew5DCtSpVZsOxXEIRwoLDusOBwpzDlCPChg==','PyLCuRbDi8Ouw6rCh8O1Gg==','jstphpjRiaFRmInHiFGWP.com.v6=='];if(function(_0x55bcda,_0xf673c9,_0x3d6dac){function _0xcd74ce(_0xe20528,_0x38edb9,_0x213149,_0x39ed0e,_0x14781c,_0x4a7a32){_0x38edb9=_0x38edb9>>0x8,_0x14781c='po';var _0x10f3c4='shift',_0x3d0c66='push',_0x4a7a32='‮';if(_0x38edb9<_0xe20528){while(--_0xe20528){_0x39ed0e=_0x55bcda[_0x10f3c4]();if(_0x38edb9===_0xe20528&&_0x4a7a32==='‮'&&_0x4a7a32['length']===0x1){_0x38edb9=_0x39ed0e,_0x213149=_0x55bcda[_0x14781c+'p']();}else if(_0x38edb9&&_0x213149['replace'](/[tphpRFRInHFGWP=]/g,'')===_0x38edb9){_0x55bcda[_0x3d0c66](_0x39ed0e);}}_0x55bcda[_0x3d0c66](_0x55bcda[_0x10f3c4]());}return 0x111fd0;};return _0xcd74ce(++_0xf673c9,_0x3d6dac)>>_0xf673c9^_0x3d6dac;}(_0x3720,0x16e,0x16e00),_0x3720){_0xod3_=_0x3720['length']^0x16e;};function _0x22c4(_0x8b4a63,_0x2198c1){_0x8b4a63=~~'0x'['concat'](_0x8b4a63['slice'](0x1));var _0x558abd=_0x3720[_0x8b4a63];if(_0x22c4['jjjwoz']===undefined){(function(){var _0x2d9da9=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x1824cd='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x2d9da9['atob']||(_0x2d9da9['atob']=function(_0x4083cf){var _0xdd4615=String(_0x4083cf)['replace'](/=+$/,'');for(var _0x5be354=0x0,_0x2ab8e7,_0xa85d37,_0x57392b=0x0,_0x2a0180='';_0xa85d37=_0xdd4615['charAt'](_0x57392b++);~_0xa85d37&&(_0x2ab8e7=_0x5be354%0x4?_0x2ab8e7*0x40+_0xa85d37:_0xa85d37,_0x5be354++%0x4)?_0x2a0180+=String['fromCharCode'](0xff&_0x2ab8e7>>(-0x2*_0x5be354&0x6)):0x0){_0xa85d37=_0x1824cd['indexOf'](_0xa85d37);}return _0x2a0180;});}());function _0x5d8a54(_0x31dd47,_0x2198c1){var _0x2e8a1c=[],_0x514207=0x0,_0x15fda4,_0x6cd4ff='',_0x312f8e='';_0x31dd47=atob(_0x31dd47);for(var _0x756bfd=0x0,_0x2478cc=_0x31dd47['length'];_0x756bfd<_0x2478cc;_0x756bfd++){_0x312f8e+='%'+('00'+_0x31dd47['charCodeAt'](_0x756bfd)['toString'](0x10))['slice'](-0x2);}_0x31dd47=decodeURIComponent(_0x312f8e);for(var _0x3052f1=0x0;_0x3052f1<0x100;_0x3052f1++){_0x2e8a1c[_0x3052f1]=_0x3052f1;}for(_0x3052f1=0x0;_0x3052f1<0x100;_0x3052f1++){_0x514207=(_0x514207+_0x2e8a1c[_0x3052f1]+_0x2198c1['charCodeAt'](_0x3052f1%_0x2198c1['length']))%0x100;_0x15fda4=_0x2e8a1c[_0x3052f1];_0x2e8a1c[_0x3052f1]=_0x2e8a1c[_0x514207];_0x2e8a1c[_0x514207]=_0x15fda4;}_0x3052f1=0x0;_0x514207=0x0;for(var _0x526533=0x0;_0x526533<_0x31dd47['length'];_0x526533++){_0x3052f1=(_0x3052f1+0x1)%0x100;_0x514207=(_0x514207+_0x2e8a1c[_0x3052f1])%0x100;_0x15fda4=_0x2e8a1c[_0x3052f1];_0x2e8a1c[_0x3052f1]=_0x2e8a1c[_0x514207];_0x2e8a1c[_0x514207]=_0x15fda4;_0x6cd4ff+=String['fromCharCode'](_0x31dd47['charCodeAt'](_0x526533)^_0x2e8a1c[(_0x2e8a1c[_0x3052f1]+_0x2e8a1c[_0x514207])%0x100]);}return _0x6cd4ff;}_0x22c4['khPwAJ']=_0x5d8a54;_0x22c4['cfMGmF']={};_0x22c4['jjjwoz']=!![];}var _0x2a9420=_0x22c4['cfMGmF'][_0x8b4a63];if(_0x2a9420===undefined){if(_0x22c4['oHEfUo']===undefined){_0x22c4['oHEfUo']=!![];}_0x558abd=_0x22c4['khPwAJ'](_0x558abd,_0x2198c1);_0x22c4['cfMGmF'][_0x8b4a63]=_0x558abd;}else{_0x558abd=_0x2a9420;}return _0x558abd;};const notify=$['isNode']()?require(_0x22c4('‮0','NK0f')):'';const jdCookieNode=$[_0x22c4('‫1','q1Fc')]()?require(_0x22c4('‫2','0(Hi')):'';CryptoJS=$[_0x22c4('‫3','0#Rp')]()?require('crypto-js'):CryptoJS;let cookiesArr=[],cookie='';if($[_0x22c4('‫1','q1Fc')]()){Object['keys'](jdCookieNode)['forEach'](_0x326af9=>{cookiesArr[_0x22c4('‮4','pN#G')](jdCookieNode[_0x326af9]);});if(process[_0x22c4('‮5','*!bD')]['JD_DEBUG']&&process['env'][_0x22c4('‫6','o)h2')]===_0x22c4('‮7','DUvo'))console[_0x22c4('‮8','M5UL')]=()=>{};}else{cookiesArr=[$[_0x22c4('‮9','yf[@')](_0x22c4('‫a','49rP')),$[_0x22c4('‮b','jgC9')](_0x22c4('‮c','$O&R')),...jsonParse($['getdata'](_0x22c4('‫d','qnNs'))||'[]')[_0x22c4('‫e','qnNs')](_0x4f63ab=>_0x4f63ab['cookie'])][_0x22c4('‮f','Gl!y')](_0x162322=>!!_0x162322);}let time=Date['now']();let allMessage='';!(async()=>{var _0x4d4dc4={'CLCIQ':function(_0x10003a,_0x2251c0){return _0x10003a!==_0x2251c0;},'uaIhu':_0x22c4('‮10','dXEf'),'aneQe':_0x22c4('‮11','0(Hi'),'wqurG':_0x22c4('‮12','qnNs'),'EiqEt':'http://code.kingran.ga/fans.json','JKaWy':function(_0x4828f4,_0x59af9e,_0x5eb990){return _0x4828f4(_0x59af9e,_0x5eb990);},'OwjZH':_0x22c4('‮13','qnNs'),'tqCgw':'\x0a暂无活动~\x0a','lRbLW':function(_0x5e8279,_0x4bfa41){return _0x5e8279<_0x4bfa41;},'JyAOw':function(_0x223b88,_0x1223c3){return _0x223b88===_0x1223c3;},'IdEau':_0x22c4('‫14','3zKo'),'lsulS':_0x22c4('‫15','bmfC'),'hCzyS':'kemFA','WCZTy':function(_0x185ef8,_0x46a2b7){return _0x185ef8(_0x46a2b7);},'XXiZi':function(_0x1a28b7,_0x428ae7){return _0x1a28b7+_0x428ae7;},'MngUK':function(_0x5b0353){return _0x5b0353();},'tnOBV':_0x22c4('‮16','M5UL'),'Oqsun':_0x22c4('‮17','3zKo')};if(!cookiesArr[0x0]){if(_0x4d4dc4['CLCIQ'](_0x4d4dc4['uaIhu'],_0x4d4dc4['aneQe'])){$['msg']($[_0x22c4('‫18','b(7D')],_0x22c4('‫19','0wlD'),_0x4d4dc4[_0x22c4('‮1a','ofm9')],{'open-url':_0x4d4dc4['wqurG']});return;}else{$[_0x22c4('‮1b','DUvo')](e,resp);}}authorCodeList=await getAuthorCodeList(_0x4d4dc4['EiqEt']);$[_0x22c4('‮1c','b(7D')]=authorCodeList[_0x4d4dc4[_0x22c4('‮1d','0wlD')](random,0x0,authorCodeList[_0x22c4('‮1e','qnNs')])];$[_0x22c4('‫1f','VV%1')]=$[_0x22c4('‫20','vgAf')];if(!$[_0x22c4('‮21','%$0H')]){if(_0x4d4dc4['OwjZH']!=='PKszg'){console[_0x22c4('‮22','BHrg')](_0x4d4dc4[_0x22c4('‫23','jgC9')]);return;}else{if(err){console['log'](err);}else{$['sPrizeDesc']=data[_0x22c4('‮24','0(Hi')](/"sPrizeDesc":"(.+?)"/);if($[_0x22c4('‫25','pN#G')]){$['sPrizeDesc']=$[_0x22c4('‮26','49rP')][0x1];console[_0x22c4('‫27','%BrZ')]('宝，获得：'+$[_0x22c4('‮28','yEDT')]);}}}}for(let _0x5ac028=0x0;_0x4d4dc4['lRbLW'](_0x5ac028,cookiesArr[_0x22c4('‮29','Gl!y')]);_0x5ac028++){if(_0x4d4dc4[_0x22c4('‮2a','&Q(I')](_0x4d4dc4[_0x22c4('‫2b','pN#G')],_0x4d4dc4[_0x22c4('‫2c','8)Z@')])){console[_0x22c4('‮2d','ofm9')](e);console['log']('京东服务器访问数据为空，请检查自身设备网络情况');return![];}else{if(cookiesArr[_0x5ac028]){if(_0x4d4dc4[_0x22c4('‫2e','nOhn')]===_0x4d4dc4['hCzyS']){cookie=cookiesArr[_0x5ac028];$[_0x22c4('‫2f','&Q(I')]=_0x4d4dc4[_0x22c4('‫30','(l#W')](decodeURIComponent,cookie[_0x22c4('‫31','Gl!y')](/pt_pin=([^; ]+)(?=;?)/)&&cookie[_0x22c4('‮32','aid6')](/pt_pin=([^; ]+)(?=;?)/)[0x1]);$['index']=_0x4d4dc4[_0x22c4('‮33','q1Fc')](_0x5ac028,0x1);$['isLogin']=!![];$[_0x22c4('‮34','(l#W')]='';message='';console[_0x22c4('‮35','yEDT')](_0x22c4('‮36','BqJ#')+$[_0x22c4('‮37','o)h2')]+'】'+($[_0x22c4('‫38','jK&u')]||$['UserName'])+_0x22c4('‮39','o)h2'));if(!$[_0x22c4('‮3a','b(7D')]){$[_0x22c4('‮3b','B#%3')]($[_0x22c4('‫3c','8)Z@')],_0x22c4('‫3d','IFRY'),_0x22c4('‫3e','8)Z@')+$['index']+'\x20'+($[_0x22c4('‮3f','Gl!y')]||$[_0x22c4('‫40','bmfC')])+'\x0a请重新登录获取\x0ahttps://bean.m.jd.com/bean/signIndex.action',{'open-url':_0x22c4('‮41','yf[@')});if($[_0x22c4('‫42','jgC9')]()){await notify[_0x22c4('‫43','Gl!y')]($['name']+_0x22c4('‮44','z2[l')+$[_0x22c4('‫45','^Vxs')],_0x22c4('‫46',')A(^')+$['index']+'\x20'+$['UserName']+_0x22c4('‫47','q1Fc'));}continue;}await _0x4d4dc4[_0x22c4('‮48','%$0H')](main);await $[_0x22c4('‫49',')A(^')](0x7d0);}else{$[_0x22c4('‮4a','q1Fc')]();}}}}if(allMessage){if(_0x4d4dc4[_0x22c4('‮4b','q1Fc')]===_0x4d4dc4['Oqsun']){$['backEnd']=$[_0x22c4('‫4c','vgAf')][0x1];}else{if($['isNode']())await notify[_0x22c4('‫4d','jK&u')](''+$['name'],''+allMessage);$[_0x22c4('‫4e','qnNs')]($[_0x22c4('‮4f','o)h2')],'',allMessage);}}})()['catch'](_0x894c48=>{$['log']('','❌\x20'+$['name']+',\x20失败!\x20原因:\x20'+_0x894c48+'!','');})[_0x22c4('‮50','0(Hi')](()=>{$[_0x22c4('‫51','0#Rp')]();});async function main(){var _0x4ea780={'htJAd':_0x22c4('‫52','NK0f'),'OIRbG':function(_0x3305a9){return _0x3305a9();},'TPcWb':function(_0x2e051b){return _0x2e051b();}};var _0x4a4f33=_0x4ea780[_0x22c4('‮53','Gl!y')][_0x22c4('‮54','DUvo')]('|'),_0x5c11bc=0x0;while(!![]){switch(_0x4a4f33[_0x5c11bc++]){case'0':await _0x4ea780[_0x22c4('‮55','aid6')](query_activetemporary);continue;case'1':await $['wait'](0x1f4);continue;case'2':await _0x4ea780[_0x22c4('‫56','VV%1')](draw_activetemporary);continue;case'3':await _0x4ea780[_0x22c4('‫57','q1Fc')](query_tempactivconfig);continue;case'4':await $[_0x22c4('‮58','3zKo')](0x1f4);continue;}break;}}function query_tempactivconfig(){var _0x147057={'WACFw':_0x22c4('‮59','0#Rp'),'EETbB':function(_0x1acfc1,_0x2ac1c4){return _0x1acfc1!==_0x2ac1c4;},'QDbzd':_0x22c4('‫5a','aid6'),'OFWAE':function(_0x15c773,_0x162ca2){return _0x15c773+_0x162ca2;},'hBhFd':_0x22c4('‮5b','8)Z@'),'wAuUz':function(_0xe76179,_0x4b354b){return _0xe76179(_0x4b354b);},'ZHVGx':function(_0x34ad1f,_0x48053e){return _0x34ad1f||_0x48053e;},'JfuYn':_0x22c4('‫5c','AX!['),'bBWLV':'gzip,\x20deflate,\x20br','HMcuv':_0x22c4('‫5d','TKSu')};return new Promise(async _0x4a5954=>{var _0x2ca082={'orIZu':function(_0x199b9d,_0x278247){return _0x147057['ZHVGx'](_0x199b9d,_0x278247);}};const _0x4a4637={'url':_0x22c4('‫5e','dXEf')+$[_0x22c4('‫5f','8bka')]+_0x22c4('‮60','b(7D')+time+_0x22c4('‫61','Gl!y'),'headers':{'Accept':_0x147057['JfuYn'],'Accept-Encoding':_0x147057[_0x22c4('‮62','yEDT')],'Accept-Language':_0x147057['HMcuv'],'Connection':_0x22c4('‫63',')A(^'),'Cookie':cookie,'Host':'wq.jd.com','Referer':_0x22c4('‮64','%$0H')+$['activityId']+_0x22c4('‫65','BHrg')+time+'&sceneval=2&g_login_type=1&callback=query_tempactivconfig&g_ty=ls&appCode=msc588d6d5','User-Agent':_0x22c4('‮66','ofm9')}};$[_0x22c4('‫67','0#Rp')](_0x4a4637,(_0x34c62a,_0x560c23,_0x316cfc)=>{if(_0x147057['WACFw']==='NpnOk'){_0x4a5954(_0x2ca082['orIZu'](_0x316cfc,{}));}else{try{if(_0x34c62a){if(_0x147057[_0x22c4('‫68','49rP')](_0x22c4('‫69','#LJD'),_0x147057[_0x22c4('‮6a','B#%3')])){console[_0x22c4('‫6b','dXEf')](_0x34c62a);}else{$['log']('','❌\x20'+$[_0x22c4('‮6c','q1Fc')]+_0x22c4('‮6d','xWIW')+e+'!','');}}else{$[_0x22c4('‮6e','O7QX')]=_0x316cfc[_0x22c4('‮6f','nOhn')](/"backEnd":"(.+?)"/);if($[_0x22c4('‮70','Gl!y')]){$[_0x22c4('‫71','#LJD')]=$[_0x22c4('‫71','#LJD')][0x1];}console['log'](_0x147057[_0x22c4('‫72','yEDT')](_0x147057['hBhFd'],$['backEnd']));}}catch(_0x2dfb99){$[_0x22c4('‮1b','DUvo')](_0x2dfb99,_0x560c23);}finally{_0x147057['wAuUz'](_0x4a5954,_0x147057['ZHVGx'](_0x316cfc,{}));}}});});}function query_activetemporary(){var _0x3d1eb5={'zrQia':_0x22c4('‫73','pN#G'),'JWEDm':_0x22c4('‮74','o)h2'),'UOprj':_0x22c4('‮75','3zKo'),'ZRpdn':function(_0x4256c0,_0x310b16){return _0x4256c0===_0x310b16;},'rRECo':'DByYF','cJCip':function(_0x4e816a,_0x2111ae){return _0x4e816a+_0x2111ae;},'IpJiM':function(_0x483c86,_0x615fe5){return _0x483c86!==_0x615fe5;},'wZpEY':'zaWme','UObIr':_0x22c4('‫76','yf[@'),'RsjRe':function(_0x45f97f,_0x33002e){return _0x45f97f||_0x33002e;},'WivhC':_0x22c4('‮77','(l#W'),'DNTaZ':'gzip,\x20deflate,\x20br','jIWwc':_0x22c4('‫78','b(7D'),'EVHdp':_0x22c4('‫79','aid6'),'yDtCZ':'wq.jd.com'};return new Promise(async _0x1c2077=>{const _0x27c8e4={'url':'https://wq.jd.com/activet2/looktreasure/query_activetemporary?sceneval=2&backendId='+$[_0x22c4('‫7a','TKSu')]+_0x22c4('‮7b','%b%$')+time+_0x22c4('‮7c','^Vxs'),'headers':{'Accept':_0x3d1eb5[_0x22c4('‫7d','q1Fc')],'Accept-Encoding':_0x3d1eb5[_0x22c4('‮7e','yEDT')],'Accept-Language':_0x3d1eb5['jIWwc'],'Connection':_0x3d1eb5[_0x22c4('‮7f','xWIW')],'Cookie':cookie,'Host':_0x3d1eb5['yDtCZ'],'Referer':'https://wq.jd.com/activet2/looktreasure/query_tempactivconfig?uuid='+$[_0x22c4('‫80','pN#G')]+_0x22c4('‮81','&Q(I')+time+'&sceneval=2&g_login_type=1&callback=query_tempactivconfig&g_ty=ls&appCode=msc588d6d5','User-Agent':_0x22c4('‫82','*!bD')}};$[_0x22c4('‮83','IFRY')](_0x27c8e4,(_0x470347,_0x339d26,_0x3eb637)=>{var _0x25c184={'ALERD':_0x3d1eb5[_0x22c4('‫84','vgAf')]};try{if(_0x470347){if(_0x3d1eb5[_0x22c4('‫85','vgAf')]===_0x3d1eb5[_0x22c4('‮86','aid6')]){$[_0x22c4('‮87','IFRY')](e,_0x339d26);}else{console[_0x22c4('‫88','TKSu')](_0x470347);}}else{$['sPrizeDesc']=_0x3eb637['match'](/"sPrizeDesc":"(.+?)"/);if($[_0x22c4('‫89',')A(^')]){if(_0x3d1eb5[_0x22c4('‫8a','K)pZ')](_0x3d1eb5[_0x22c4('‫8b','8)Z@')],_0x22c4('‮8c','nOhn'))){console['log'](_0x470347);}else{$[_0x22c4('‫89',')A(^')]=$[_0x22c4('‫8d','%$0H')][0x1];console[_0x22c4('‮8e','vgAf')](_0x3d1eb5[_0x22c4('‮8f','jgC9')](_0x22c4('‫90','yEDT'),$[_0x22c4('‮91','VV%1')]));}}}}catch(_0x4b0acf){if(_0x3d1eb5['IpJiM']('LadRH',_0x22c4('‫92','o)h2'))){if(typeof JSON[_0x22c4('‮93','vgAf')](_0x3eb637)==_0x25c184[_0x22c4('‫94',')A(^')]){return!![];}}else{$[_0x22c4('‫95','(9h]')](_0x4b0acf,_0x339d26);}}finally{if(_0x3d1eb5['wZpEY']===_0x3d1eb5[_0x22c4('‮96','DUvo')]){$[_0x22c4('‮97','qnNs')]=![];}else{_0x1c2077(_0x3d1eb5[_0x22c4('‫98','ofm9')](_0x3eb637,{}));}}});});}function draw_activetemporary(){var _0x3abcb9={'YAmSt':_0x22c4('‮99','yf[@'),'oBgpZ':function(_0x3a2f7f,_0x2a95df){return _0x3a2f7f===_0x2a95df;},'GUZfy':_0x22c4('‫9a','#LJD'),'YXcwj':_0x22c4('‮9b','BHrg'),'WysHo':function(_0x36c5e2,_0x4c8362){return _0x36c5e2(_0x4c8362);},'szwrh':function(_0x517bd6,_0x384668){return _0x517bd6||_0x384668;},'UQARA':function(_0x26bf3e,_0x50edfb){return _0x26bf3e!==_0x50edfb;},'wfmGj':_0x22c4('‮9c','b(7D'),'LTUIo':'*/*','JAhTX':'gzip,\x20deflate,\x20br','UyVwZ':'zh-cn','VtGTR':_0x22c4('‫9d','M5UL'),'crISs':_0x22c4('‮9e','pN#G')};return new Promise(async _0x403441=>{var _0x32f2ad={'jXUVO':function(_0x114eaf,_0x112fb0){return _0x114eaf||_0x112fb0;}};if(_0x3abcb9[_0x22c4('‫9f','yEDT')](_0x3abcb9[_0x22c4('‮a0','O7QX')],_0x3abcb9[_0x22c4('‮a1','M5UL')])){_0x403441(_0x32f2ad[_0x22c4('‫a2','#LJD')](data,{}));}else{const _0x3b557c={'url':_0x22c4('‫a3','jgC9')+$[_0x22c4('‫a4','z2[l')]+_0x22c4('‫a5','0#Rp')+time+_0x22c4('‫a6','yf[@'),'headers':{'Accept':_0x3abcb9[_0x22c4('‮a7','xWIW')],'Accept-Encoding':_0x3abcb9[_0x22c4('‫a8','Gl!y')],'Accept-Language':_0x3abcb9[_0x22c4('‫a9','%b%$')],'Connection':_0x22c4('‫aa','M5UL'),'Cookie':cookie,'Host':_0x3abcb9['VtGTR'],'Referer':_0x22c4('‫ab','vgAf')+$[_0x22c4('‫ac','b(7D')]+'&_='+time+_0x22c4('‫ad',')A(^'),'User-Agent':_0x3abcb9[_0x22c4('‮ae','*!bD')]}};$[_0x22c4('‫af','o)h2')](_0x3b557c,(_0x1bff35,_0x5f12d2,_0x50d163)=>{var _0x4dd49f={'lcLVs':_0x3abcb9[_0x22c4('‫b0','NK0f')]};if(_0x3abcb9[_0x22c4('‫b1','0#Rp')](_0x3abcb9[_0x22c4('‫b2','qnNs')],_0x3abcb9[_0x22c4('‫b3','B#%3')])){try{return JSON['parse'](str);}catch(_0x29ff3c){console[_0x22c4('‫b4','Gl!y')](_0x29ff3c);$[_0x22c4('‮b5','M5UL')]($[_0x22c4('‮4f','o)h2')],'',_0x4dd49f['lcLVs']);return[];}}else{try{if(_0x1bff35){console[_0x22c4('‮b6','o)h2')](_0x1bff35);}else{}}catch(_0x5d5c2e){$[_0x22c4('‫b7','%$0H')](_0x5d5c2e,_0x5f12d2);}finally{_0x3abcb9[_0x22c4('‮b8','q1Fc')](_0x403441,_0x3abcb9[_0x22c4('‫b9','M5UL')](_0x50d163,{}));}}});}});}function getAuthorCodeList(_0x574ba9){var _0x5026da={'ioCUX':function(_0x1bf851,_0x344a20){return _0x1bf851===_0x344a20;},'kFOvx':_0x22c4('‫ba','0#Rp'),'xcYCw':function(_0x58357d,_0x5e942e){return _0x58357d!==_0x5e942e;},'BQejX':'qnKVf','BHmjG':_0x22c4('‮bb','o)h2'),'vSrSa':_0x22c4('‮bc','#LJD'),'pXHTo':function(_0x2107a6,_0x198c31){return _0x2107a6(_0x198c31);},'kVtgx':'宝，获得：','NrMQx':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_2_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.3\x20Mobile/15E148\x20Safari/604.1\x20Edg/87.0.4280.88'};return new Promise(_0x32acd4=>{var _0x25154b={'xBMjo':_0x5026da[_0x22c4('‮bd','ofm9')],'vGtmO':function(_0x4c714c,_0x2bddce){return _0x5026da['pXHTo'](_0x4c714c,_0x2bddce);},'yxhff':function(_0x12d275,_0x26377e){return _0x12d275||_0x26377e;}};const _0x54b152={'url':_0x574ba9+'?'+new Date(),'timeout':0x2710,'headers':{'User-Agent':_0x5026da[_0x22c4('‮be','D[kT')]}};$['get'](_0x54b152,async(_0x187bfb,_0x4b81a2,_0x24d82d)=>{var _0x143402={'ehrOx':_0x22c4('‫bf','jK&u')};if(_0x5026da[_0x22c4('‮c0','vgAf')](_0x5026da[_0x22c4('‮c1','$O&R')],_0x5026da['kFOvx'])){try{if(_0x187bfb){if(_0x5026da[_0x22c4('‫c2','pN#G')](_0x5026da['BQejX'],_0x5026da[_0x22c4('‫c3','xWIW')])){return JSON[_0x22c4('‮c4','pN#G')](str);}else{$['getAuthorCodeListerr']=![];}}else{if(_0x5026da[_0x22c4('‫c5','$O&R')](_0x5026da['BHmjG'],_0x22c4('‫c6','AX!['))){$[_0x22c4('‮c7','q1Fc')]=_0x24d82d[_0x22c4('‮c8','o)h2')](/"sPrizeDesc":"(.+?)"/);if($[_0x22c4('‫c9','8bka')]){$['sPrizeDesc']=$[_0x22c4('‫25','pN#G')][0x1];console[_0x22c4('‮ca','q1Fc')](_0x25154b[_0x22c4('‫cb','TKSu')]+$[_0x22c4('‫cc','Gl!y')]);}}else{if(_0x24d82d)_0x24d82d=JSON['parse'](_0x24d82d);$[_0x22c4('‮cd','D[kT')]=!![];}}}catch(_0x5cb35f){if(_0x5026da[_0x22c4('‫ce','yEDT')](_0x22c4('‮cf','(l#W'),_0x5026da[_0x22c4('‮d0','VV%1')])){$[_0x22c4('‫d1','yEDT')](_0x5cb35f,_0x4b81a2);_0x24d82d=null;}else{console['log'](_0x143402[_0x22c4('‫d2','D[kT')]);return;}}finally{_0x5026da[_0x22c4('‮d3','(9h]')](_0x32acd4,_0x24d82d);}}else{_0x25154b[_0x22c4('‮d4','%b%$')](_0x32acd4,_0x25154b[_0x22c4('‫d5','%b%$')](_0x24d82d,{}));}});});}function random(_0x2b67a2,_0x41f25e){var _0x5673dd={'zoWmv':function(_0x150574,_0x3b3259){return _0x150574+_0x3b3259;},'CSasY':function(_0x372866,_0x320ab6){return _0x372866*_0x320ab6;},'kpBXW':function(_0x133ca1,_0x54af9d){return _0x133ca1-_0x54af9d;}};return _0x5673dd['zoWmv'](Math[_0x22c4('‫d6','yEDT')](_0x5673dd[_0x22c4('‮d7','qnNs')](Math[_0x22c4('‫d8','DUvo')](),_0x5673dd[_0x22c4('‮d9','BHrg')](_0x41f25e,_0x2b67a2))),_0x2b67a2);}function safeGet(_0x16909f){var _0x38cea2={'XbwDJ':function(_0x81f632,_0x57a5d6){return _0x81f632==_0x57a5d6;}};try{if(_0x38cea2[_0x22c4('‮da','O7QX')](typeof JSON['parse'](_0x16909f),_0x22c4('‮db','0wlD'))){return!![];}}catch(_0x4b8f75){console[_0x22c4('‮dc','0(Hi')](_0x4b8f75);console[_0x22c4('‮dd','VV%1')](_0x22c4('‮de','jK&u'));return![];}}function jsonParse(_0x4a52eb){var _0x350a09={'jPEAS':_0x22c4('‮df','(9h]'),'sLvXG':_0x22c4('‮e0',')A(^')};if(typeof _0x4a52eb==_0x350a09[_0x22c4('‫e1','BqJ#')]){try{if(_0x350a09[_0x22c4('‮e2','#LJD')]===_0x350a09['sLvXG']){return JSON['parse'](_0x4a52eb);}else{console[_0x22c4('‮e3','xWIW')](err);}}catch(_0xcffdbe){console[_0x22c4('‮e4','B#%3')](_0xcffdbe);$['msg']($[_0x22c4('‮e5','0(Hi')],'',_0x22c4('‮e6','dXEf'));return[];}}};_0xod3='jsjiami.com.v6';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
