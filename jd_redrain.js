/*
活动名称：京豆红包雨
环境变量：jd_redRain2021_threads // 控制并发线程数（正整数），默认1，最大10，尽量使用默认值，否则请开启代理运行
        jd_redRain2021_interval // 自定义运行间隔时长（整数，单位毫秒），默认500
        jd_redRain2021_notify // 是否推送通知（true/false），默认不推送
        jd_redRain2021_pinFilter // 账号pin过滤，多个用@进行分割

高并发脚本，谨慎使用并发
活动限制IP严重，建议使用代理
定时请自行修改

cron:1 1 1 1 *

*/

const $ = new Env('京豆红包雨')
var iｉl='jsjiami.com.v7';function iii1II(_0x59945b,_0x29b7d4){const _0x263968=Iii11l();return iii1II=function(_0x1fdb56,_0x15c7f8){_0x1fdb56=_0x1fdb56-0x1ac;let _0xd3a250=_0x263968[_0x1fdb56];if(iii1II['CZYklG']===undefined){var _0x56fa7f=function(_0x5e937c){const _0x4340e4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x34adae='',_0x515c12='';for(let _0x1487ca=0x0,_0x22d6c6,_0x42ebec,_0x3adbc1=0x0;_0x42ebec=_0x5e937c['charAt'](_0x3adbc1++);~_0x42ebec&&(_0x22d6c6=_0x1487ca%0x4?_0x22d6c6*0x40+_0x42ebec:_0x42ebec,_0x1487ca++%0x4)?_0x34adae+=String['fromCharCode'](0xff&_0x22d6c6>>(-0x2*_0x1487ca&0x6)):0x0){_0x42ebec=_0x4340e4['indexOf'](_0x42ebec);}for(let _0x1e796c=0x0,_0xe37a46=_0x34adae['length'];_0x1e796c<_0xe37a46;_0x1e796c++){_0x515c12+='%'+('00'+_0x34adae['charCodeAt'](_0x1e796c)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x515c12);};const _0x40a0db=function(_0x56ceb5,_0x4d5821){let _0x3b1c2a=[],_0x203ce7=0x0,_0x3150bf,_0x24c96e='';_0x56ceb5=_0x56fa7f(_0x56ceb5);let _0x31e80e;for(_0x31e80e=0x0;_0x31e80e<0x100;_0x31e80e++){_0x3b1c2a[_0x31e80e]=_0x31e80e;}for(_0x31e80e=0x0;_0x31e80e<0x100;_0x31e80e++){_0x203ce7=(_0x203ce7+_0x3b1c2a[_0x31e80e]+_0x4d5821['charCodeAt'](_0x31e80e%_0x4d5821['length']))%0x100,_0x3150bf=_0x3b1c2a[_0x31e80e],_0x3b1c2a[_0x31e80e]=_0x3b1c2a[_0x203ce7],_0x3b1c2a[_0x203ce7]=_0x3150bf;}_0x31e80e=0x0,_0x203ce7=0x0;for(let _0x5ed4be=0x0;_0x5ed4be<_0x56ceb5['length'];_0x5ed4be++){_0x31e80e=(_0x31e80e+0x1)%0x100,_0x203ce7=(_0x203ce7+_0x3b1c2a[_0x31e80e])%0x100,_0x3150bf=_0x3b1c2a[_0x31e80e],_0x3b1c2a[_0x31e80e]=_0x3b1c2a[_0x203ce7],_0x3b1c2a[_0x203ce7]=_0x3150bf,_0x24c96e+=String['fromCharCode'](_0x56ceb5['charCodeAt'](_0x5ed4be)^_0x3b1c2a[(_0x3b1c2a[_0x31e80e]+_0x3b1c2a[_0x203ce7])%0x100]);}return _0x24c96e;};iii1II['YqwYuP']=_0x40a0db,_0x59945b=arguments,iii1II['CZYklG']=!![];}const _0x3b13eb=_0x263968[0x0],_0x1269de=_0x1fdb56+_0x3b13eb,_0x143621=_0x59945b[_0x1269de];return!_0x143621?(iii1II['JBbdbo']===undefined&&(iii1II['JBbdbo']=!![]),_0xd3a250=iii1II['YqwYuP'](_0xd3a250,_0x15c7f8),_0x59945b[_0x1269de]=_0xd3a250):_0xd3a250=_0x143621,_0xd3a250;},iii1II(_0x59945b,_0x29b7d4);}const lill1I=iii1II;if(function(IlllII,I1il1I,II111,lI1l1I,lill11,liI1i1,I11i11){return IlllII=IlllII>>0x5,liI1i1='hs',I11i11='hs',function(I1llII,Iil1il,I11i1i,l1l1iI,I1llI1){const Iil1ii=iii1II;l1l1iI='tfi',liI1i1=l1l1iI+liI1i1,I1llI1='up',I11i11+=I1llI1,liI1i1=I11i1i(liI1i1),I11i11=I11i1i(I11i11),I11i1i=0x0;const I11i1l=I1llII();while(!![]&&--lI1l1I+Iil1il){try{l1l1iI=-parseInt(Iil1ii(0x2e5,'*u2e'))/0x1+-parseInt(Iil1ii(0x29f,'lA@x'))/0x2*(parseInt(Iil1ii(0x203,'&7kJ'))/0x3)+parseInt(Iil1ii(0x1e8,')cKx'))/0x4*(-parseInt(Iil1ii(0x255,'!I7]'))/0x5)+-parseInt(Iil1ii(0x250,')cKx'))/0x6+-parseInt(Iil1ii(0x2d3,')cKx'))/0x7+-parseInt(Iil1ii(0x28c,'fnsC'))/0x8+parseInt(Iil1ii(0x1de,'iDZu'))/0x9*(parseInt(Iil1ii(0x219,'s@pv'))/0xa);}catch(il1il){l1l1iI=I11i1i;}finally{I1llI1=I11i1l[liI1i1]();if(IlllII<=lI1l1I)I11i1i?lill11?l1l1iI=I1llI1:lill11=I1llI1:I11i1i=I1llI1;else{if(I11i1i==lill11['replace'](/[AXuIYpKOxEBeLPCyg=]/g,'')){if(l1l1iI===Iil1il){I11i1l['un'+liI1i1](I1llI1);break;}I11i1l[I11i11](I1llI1);}}}}}(II111,I1il1I,function(Il1i1i,iIIili,Ii1iiI,Ilil1I,iliIiI,II11iI,Il1i1l){return iIIili='\x73\x70\x6c\x69\x74',Il1i1i=arguments[0x0],Il1i1i=Il1i1i[iIIili](''),Ii1iiI=`\x72\x65\x76\x65\x72\x73\x65`,Il1i1i=Il1i1i[Ii1iiI]('\x76'),Ilil1I=`\x6a\x6f\x69\x6e`,(0x16d165,Il1i1i[Ilil1I](''));});}(0x18c0,0xa60d1,Iii11l,0xc8),Iii11l){}const jdCookie=require('./jdCookie'),common=require(lill1I(0x1fb,'ig]x')),notify=require(lill1I(0x236,'#wmK'));console[lill1I(0x1f2,')cKx')](''),console[lill1I(0x29c,'O(as')](lill1I(0x20a,'&7kJ')+$['name']+lill1I(0x1c5,'oa0L')),console[lill1I(0x257,'P))J')](lill1I(0x277,'oh9v')),console['log'](lill1I(0x27d,'pGtX')),console[lill1I(0x1f2,')cKx')]('jd_redRain2021_notify\x20//\x20是否通知(true/false)，默认不推送'),console['log']('jd_redRain2021_pinFilter\x20//\x20账号pin过滤，多个用@进行分割'),console[lill1I(0x2d9,'pOj0')](lill1I(0x23e,'y8pW')+$['name']+'提示结束=========='),console[lill1I(0x21b,'QjY9')]('');let taskThreads=process[lill1I(0x22a,'owii')]['jd_redRain2021_threads']||'1';const runInterval=process[lill1I(0x34c,'Wl1d')]['jd_redRain2021_interval']||lill1I(0x30a,'P))J'),isNotify=(process[lill1I(0x302,'&Ggz')][lill1I(0x1d0,'0ZaG')]||process[lill1I(0x1c4,'lA@x')]['jd_redRain2021_Notify'])==='true',pinFilter=(process[lill1I(0x221,'!I7]')][lill1I(0x2f3,'14fw')]||'')['split']('@');interaction=[];let cookiesArr=Object[lill1I(0x2c6,'q&w[')](jdCookie)['map'](iiilil=>jdCookie[iiilil])[lill1I(0x2b3,'5lW#')](iil1li=>iil1li);!cookiesArr[0x0]&&($[lill1I(0x27a,'&Ggz')]($[lill1I(0x208,'uy@&')],lill1I(0x272,'$6v$')),process['exit'](0x1));!(async()=>{const Ii1ii1=lill1I;notify[Ii1ii1(0x228,'oa0L')]({'title':$['name']}),await Main(),isNotify&&notify['getMessage']()&&('JBarm'!==Ii1ii1(0x27b,'gblU')?await notify[Ii1ii1(0x21d,']&Yv')]():iIIl1l['log'](Ii1ii1(0x2d8,')cKx')+llIli1['length']+Ii1ii1(0x2e9,'&O%^')));})()[lill1I(0x226,'j0z3')](iIiIl=>$[lill1I(0x1d3,'#wmK')](iIiIl))[lill1I(0x229,'$6v$')](()=>$['done']());async function Main(){const Ilil11=lill1I,iiilii={'QAZrM':function(li1i1i,IlIli1){return li1i1i>=IlIli1;},'toVeE':Ilil11(0x242,'uD5^'),'BKLtj':function(illIiI,lI1lli){return illIiI(lI1lli);},'jHfsj':function(Ill1l,llI1Il){return Ill1l>llI1Il;},'FeQWV':function(ii1iii,i11iil){return ii1iii!==i11iil;},'RxICc':'KCeAB','DAnVE':function(Ill1i,ii1iil){return Ill1i(ii1iil);},'bwWyD':function(lllI1l,i11iii){return lllI1l>i11iii;},'nQyEc':function(llI1Ii,lllI1i){return llI1Ii!==lllI1i;},'tKuSe':'GNNTc','EDmgM':Ilil11(0x237,'*u2e'),'HQFEA':'PaDdB','WWonf':Ilil11(0x28b,'gblU'),'XSaag':'红包雨','csKxj':function(li1i1l,II1i1){return li1i1l===II1i1;},'kPDFG':Ilil11(0x25f,'5lW#'),'ugIki':function(lI1lll,iIiII){return lI1lll!==iIiII;},'uZJgZ':Ilil11(0x1c6,'#Y4['),'NqkvR':Ilil11(0x1f4,'fnsC'),'ygiYL':'bGsBs','ENZLy':Ilil11(0x232,'lUX2'),'eymGF':'yyyy-MM-dd\x20HH:mm','rkuVg':function(iil1lI,iiiliI){return iil1lI>iiiliI;},'ImpIM':'QercC','daPlL':Ilil11(0x33d,'&7kJ'),'NRaeR':function(li1i1I,illIii){return li1i1I>illIii;},'AKTdu':function(ii1il1,lI1llI){return ii1il1>lI1llI;},'PjSrh':function(illIil,Ill1I){return illIil!==Ill1I;},'TGbKM':Ilil11(0x292,'xPXH'),'QdeQT':function(i11iiI,lIli11){return i11iiI-lIli11;},'TgsVw':Ilil11(0x245,'vOWW')};try{try{if(iiilii[Ilil11(0x31c,'#wmK')]('DhMsy',iiilii[Ilil11(0x317,'lA@x')])){const IlIlii=iiilii[Ilil11(0x339,'bCq7')](parseInt,taskThreads);iiilii['bwWyD'](IlIlii,0x0)&&iiilii[Ilil11(0x20d,'xPXH')](IlIlii,0x1)&&(taskThreads=IlIlii);}else try{const liil11=lI1Iii(i1li);iiilii['QAZrM'](liil11,0x0)&&(IliI11['waitTime']=liil11);}catch{i1l1lI[Ilil11(0x252,'dlbU')](Ilil11(0x2c3,'&7kJ'));}}catch{if(iiilii['nQyEc'](iiilii[Ilil11(0x1b8,'&O%^')],iiilii['EDmgM']))taskThreads=0x1;else{i1illl[Ilil11(0x1fe,'*u2e')](I1llil+Ilil11(0x26c,'owii')),I1llii[Ilil11(0x22d,'j0z3')](Ilil11(0x213,'s@pv')),lilIll['needRemoveCookieIndex'][Ilil11(0x1fa,'0@6t')](l1i111);return;}}taskThreads=Math[Ilil11(0x2c0,'O(as')](taskThreads,0xa),$[Ilil11(0x212,'[aU!')]=null;if(runInterval)try{const l1l111=parseInt(runInterval);l1l111>=0x0&&(iiilii[Ilil11(0x2bd,'!I7]')]===Ilil11(0x1c7,'*81y')?$[Ilil11(0x251,'0@6t')]=l1l111:IllIIi[Ilil11(0x31b,'zMY*')](IllIIl[Ilil11(0x2d1,'pGtX')]));}catch{console[Ilil11(0x273,'gblU')](Ilil11(0x271,'Wl1d'));}const lllI1I=Ilil11(0x2d6,'O(as')+common[Ilil11(0x1cd,'gblU')](0xd,Ilil11(0x2a3,'fnsC'));$['UA']=common['genUA'](lllI1I),$[Ilil11(0x2a2,'z(mX')]=common['getJEC'](lllI1I),$['JEH']=common[Ilil11(0x1ff,'gblU')](),$[Ilil11(0x249,'pGtX')]='';let lillI1=![];await sendRequest('xview2Config');if($['xview2Config'])for(let llI1I1 of $[Ilil11(0x293,'vOWW')][Ilil11(0x204,'QjY9')]||[]){for(let IlIlil of llI1I1['layers']||[]){if(iiilii[Ilil11(0x2c9,'bCq7')](iiilii[Ilil11(0x225,'uD5^')],iiilii[Ilil11(0x2f7,'dlbU')])){let II1il=IiiIl1?.['rewardsInfo']?.[Ilil11(0x2e2,')cKx')]?.[Ilil11(0x32f,'vt8)')](lllI11=>lllI11[Ilil11(0x23a,'HgLI')])?.[Ilil11(0x227,'UrKY')](',')||'';lIIil1[Ilil11(0x2c8,'owii')](IIli1+Ilil11(0x20f,'iZhc')+II1il),II1il?.[Ilil11(0x307,'xPXH')](iiilii[Ilil11(0x1d6,'dlbU')])&&(IlI1i1['runEnd']=!![]);}else{if([iiilii[Ilil11(0x32e,'zMY*')],Ilil11(0x1bd,'&Ggz')]['some'](I1lIll=>IlIlil[Ilil11(0x24b,'5lW#')]['includes'](I1lIll))){if(iiilii[Ilil11(0x1bb,'!I7]')]('vOyGq',Ilil11(0x2bb,'lA@x'))){let I1lIli=IlIlil['renderData']['url'],II1ii=IlIlil[Ilil11(0x1c2,'P))J')][0x0][Ilil11(0x243,'ig]x')],IIIIII;for(let lillII of[I1lIli,II1ii]){if(lillII[Ilil11(0x340,'Bx8c')](Ilil11(0x284,']&Yv'))){IIIIII=lillII;break;}}if(!IIIIII&&I1lIli[Ilil11(0x2ba,']&Yv')](iiilii['kPDFG'])){if(iiilii[Ilil11(0x2af,'!I7]')](Ilil11(0x1c9,'QjY9'),iiilii[Ilil11(0x1fd,'O(as')])){const lI1ll1=iiilii[Ilil11(0x2ce,'uy@&')](lI1Iil,lilIiI);lI1ll1>=0x0&&(IiilIi['waitTime']=lI1ll1);}else try{if(Ilil11(0x264,'y8pW')===Ilil11(0x235,'HgLI')){ss=await iiilii[Ilil11(0x2e6,'q&w[')](jsonurl,I1lIli);for(let iIiI1 of ss['tpl'][Ilil11(0x1ae,'*81y')]){if(iIiI1[Ilil11(0x234,'zMY*')][Ilil11(0x2a9,'14fw')][Ilil11(0x2ad,'HgLI')](iiilii[Ilil11(0x287,'&7kJ')])){IIIIII=iIiI1['dataPath'][Ilil11(0x319,'O(as')];break;}}}else I1iIiI['log']('📢\x20'+li1I1+'至'+i1ilil+'有京豆红包雨');}catch(i11ii1){}}if(IIIIII){if(iiilii[Ilil11(0x2cf,'#Y4[')]===Ilil11(0x2bc,'UrKY'))I1ilIi[Ilil11(0x1eb,'uD5^')](IiiiI),llIlli&&(IiiIil['outFlag']=!![],IiiIii[Ilil11(0x1d5,'pOj0')]&&ll1lI[Ilil11(0x244,'#wmK')][Ilil11(0x2b0,'uy@&')](l1iii));else{if(IlIlil['rule'][Ilil11(0x1b2,'owii')]){if(iiilii['FeQWV'](iiilii[Ilil11(0x21c,'z(mX')],iiilii['ENZLy']))return;else{lillI1=!![];let iiill1=IlIlil[Ilil11(0x2b9,'vOWW')][Ilil11(0x2ee,'[aU!')],lIli1i=IlIlil[Ilil11(0x2b4,'P))J')][Ilil11(0x1bf,'z(mX')];const IIIII1=$[Ilil11(0x248,'!I7]')](Ilil11(0x260,'pGtX'),iiill1),I1lIlI=$[Ilil11(0x31e,'bCq7')](iiilii['eymGF'],lIli1i);let ii1ill=new Date()[Ilil11(0x312,'q&w[')]();if(ii1ill>lIli1i)console['log'](Ilil11(0x1dd,'iZhc'));else iiilii['rkuVg'](ii1ill,iiill1)?(console[Ilil11(0x252,'dlbU')](Ilil11(0x2be,'fnsC')),await iiilii[Ilil11(0x2e6,'q&w[')](redRainurl,IIIIII)):console[Ilil11(0x343,'&Ggz')]('📢\x20'+IIIII1+'至'+I1lIlI+'有京豆红包雨');}}}}}else II1Il=lilIlI;}}}}if(!lillI1){if(Ilil11(0x2de,'Bx8c')!==iiilii[Ilil11(0x2d7,'gblU')])IIli1I[Ilil11(0x2e4,'Bx8c')](Ilil11(0x324,'Bx8c')+I1i11I+'\x20请求响应\x20'+(llIliI[Ilil11(0x2c4,'oh9v')]||I1l1I1));else{authorCodeList=await jsonurl(iiilii[Ilil11(0x337,'0@6t')]);if(authorCodeList&&iiilii[Ilil11(0x288,'vt8)')](authorCodeList[Ilil11(0x256,'0@6t')],0x0))for(let lIli1l=0x0;lIli1l<authorCodeList[Ilil11(0x2f9,'5lW#')];lIli1l++){$[Ilil11(0x342,'uD5^')]=authorCodeList[lIli1l],$[Ilil11(0x30b,'O(as')]='https://pro.m.jd.com/mall/active/'+$[Ilil11(0x349,'oh9v')]+Ilil11(0x1ec,'j0z3'),await redRainurl($[Ilil11(0x1ee,'!I7]')]);}}}if(iiilii[Ilil11(0x279,'z(mX')](interaction['length'],0x0))console['log'](Ilil11(0x347,'j0z3')+interaction[Ilil11(0x1f1,'owii')]+Ilil11(0x310,'&7kJ'));else return;for(let lillIi=0x0;lillIi<interaction[Ilil11(0x327,'UrKY')];lillIi++){if(iiilii[Ilil11(0x2d5,'&O%^')]('lOvQl',iiilii[Ilil11(0x1cf,'ig]x')])){const ii1ili=i1ili1(i1l1l1);iiilii['jHfsj'](ii1ili,0x0)&&ii1ili!==0x1&&(II11Ii=ii1ili);}else $[Ilil11(0x2fc,'lA@x')]=[],$['encryptProjectId']=interaction[lillIi]['encryptProjectId'],$['encryptAssignmentId']=interaction[lillIi][Ilil11(0x2f6,'zMY*')],await common[Ilil11(0x300,'Wl1d')](taskThreads,cookiesArr,taskFnc),$['runEnd']=![],lillIi!==iiilii[Ilil11(0x2c5,'iDZu')](interaction[Ilil11(0x298,'vt8)')],0x1)&&console[Ilil11(0x1b0,'5lW#')](''),iiilii[Ilil11(0x1ea,'iDZu')]($['needRemoveCookieIndex']['length'],0x0)&&(Ilil11(0x265,'Wl1d')===Ilil11(0x1ca,'q&w[')?(cookiesArr=cookiesArr[Ilil11(0x216,'xPXH')]((liil1i,lI1lil)=>!$[Ilil11(0x1d9,'#wmK')][Ilil11(0x25e,'pGtX')](lI1lil+0x1)),$['needRemoveCookieIndex']=[]):iIIl1i['log'](''));}}catch(liil1l){iiilii['TgsVw']!==Ilil11(0x33b,'oh9v')?console[Ilil11(0x24d,'!I7]')](Ilil11(0x1be,'bCq7')+liil1l):(lI11I1['log'](l1il11),IiI1&&(illIli['outFlag']=!![]));}}async function taskFnc(Iiili1,Iil1l1){const i1ii1=lill1I,i1i11I={'OiLkW':'dotask','AUwvj':i1ii1(0x306,'[aU!'),'UkwJL':function(lilIIl,ililIl){return lilIIl!==ililIl;},'apqHm':i1ii1(0x314,'fnsC'),'hgzjE':i1ii1(0x335,'Bx8c'),'vTSwq':'项目未上线','tlycz':'项目未开始','vTDmV':'WlGjp','TfBwL':'GET','UojcA':i1ii1(0x1c0,'*u2e'),'JsuQB':function(liiI1l,i1l1II){return liiI1l(i1l1II);},'jLWLq':i1ii1(0x2a1,'owii'),'IfTwn':i1ii1(0x1e1,'!I7]'),'LtTtN':i1ii1(0x2ec,'$6v$'),'zvwZO':'empty','JFUms':i1ii1(0x334,'HgLI'),'FdJDo':i1ii1(0x205,'[aU!'),'VPXSU':function(i1ill,I1l11l){return i1ill===I1l11l;},'Axfru':function(lilIIi,i1l1Il){return lilIIi<i1l1Il;},'DyXwz':'BbEcs','ruZcV':function(llIli,i1i11l){return llIli===i1i11l;},'lPQJo':'RdPLL','cTUix':i1ii1(0x1b6,'uD5^'),'jsiNi':'已设置跳过运行当前账号','GhHks':function(i1i11i,II11l1){return i1i11i===II11l1;},'vlvfK':i1ii1(0x1b5,'vt8)'),'OVhhR':'账号无效'};if($[i1ii1(0x1e0,'O(as')])return{'runEnd':!![]};const il1iIl=decodeURIComponent(common['getCookieValue'](Iiili1,i1ii1(0x23c,'HgLI'))),iii1ii=i1ii1(0x1e9,'#wmK')+Iil1l1+'】'+il1iIl+'：',il1iIi=notify[i1ii1(0x2b8,'0ZaG')](Iil1l1,il1iIl);if(pinFilter[i1ii1(0x329,'[aU!')]>0x0&&(pinFilter[i1ii1(0x2ad,'HgLI')](il1iIl)||pinFilter[i1ii1(0x20b,'RUh6')](encodeURIComponent(il1iIl)))){if(i1i11I[i1ii1(0x285,'pOj0')]!==i1ii1(0x303,']&Yv')){il1iIi[i1ii1(0x30e,'zMY*')](i1i11I[i1ii1(0x30f,'zMY*')]),console[i1ii1(0x1b0,'5lW#')](il1iIi[i1ii1(0x28e,'&7kJ')]()),$[i1ii1(0x222,'UrKY')]['push'](Iil1l1);return;}else[0x193,0x1ed]['includes'](lilIl['status'])&&(iIli11=!![]);}const iii1il=await common[i1ii1(0x2bf,'iDZu')](Iiili1);if(!iii1il&&i1i11I[i1ii1(0x21e,'pOj0')](typeof iii1il,i1i11I[i1ii1(0x268,'gblU')])){console[i1ii1(0x273,'gblU')](iii1ii+i1ii1(0x215,'#wmK')),il1iIi['fix'](i1i11I[i1ii1(0x336,'*81y')]),$[i1ii1(0x1ac,'oh9v')][i1ii1(0x25a,')ucZ')](Iil1l1);return;}const II11li=common[i1ii1(0x323,']&Yv')](il1iIl),I1l11i=common[i1ii1(0x1d7,'z(mX')](il1iIl),iIIiiI=common[i1ii1(0x1ff,'gblU')]();if($[i1ii1(0x2fa,'14fw')])return{'runEnd':!![]};await ililIi(i1i11I[i1ii1(0x207,'0@6t')]);if($[i1ii1(0x2e0,'&7kJ')])return{'runEnd':!![]};if($[i1ii1(0x214,'UrKY')])await $['wait']($['waitTime']);function liiI1i(IiiliI,iii1iI){const il1ii=i1ii1;try{switch(IiiliI){case i1i11I[il1ii(0x322,'lA@x')]:if(iii1iI&&iii1iI[il1ii(0x28f,'lA@x')]==0x0){let llIll=[],il1iII=Object[il1ii(0x2c2,'Wl1d')](iii1iI?.['rewardsInfo']?.['successRewards']||{});for(let iilli of il1iII){if(il1ii(0x246,'QjY9')===i1i11I[il1ii(0x210,'5lW#')])Iiiii=!![];else{let II11lI=iii1iI['rewardsInfo']['successRewards'][iilli];llIll=llIll[il1ii(0x2c7,'0@6t')](II11lI[il1ii(0x2dd,')cKx')](lI1IIi=>lI1IIi?.[il1ii(0x231,'&O%^')]?lI1IIi['quantity']+'京豆':'优惠券'));}}if(llIll[il1ii(0x2a5,'HgLI')]>0x0)i1i11I[il1ii(0x241,'*u2e')](i1i11I[il1ii(0x224,'vt8)')],il1ii(0x315,'QjY9'))?lI1IiI[il1ii(0x2db,'ig]x')]=i1lI:console[il1ii(0x343,'&Ggz')](iii1ii+il1ii(0x22c,'Wl1d')+llIll[il1ii(0x1e5,'#Y4[')]('+'));else{if(iii1iI?.[il1ii(0x33a,'QjY9')]?.['failRewards']?.[il1ii(0x1df,'s@pv')]>0x0){let Ilil1l=iii1iI?.[il1ii(0x2b6,')cKx')]?.[il1ii(0x341,'q&w[')]?.['map'](iIIiii=>iIIiii[il1ii(0x24f,'RUh6')])?.['join'](',')||'';console[il1ii(0x2d9,'pOj0')](iii1ii+il1ii(0x267,'y8pW')+Ilil1l),Ilil1l?.[il1ii(0x269,'uy@&')](i1i11I[il1ii(0x262,'&Ggz')])&&($[il1ii(0x2e0,'&7kJ')]=!![]);}}}else iii1iI[il1ii(0x313,'!I7]')]?'QYEoQ'!=='aHjQK'?(console['log'](iii1ii+il1ii(0x2ef,'O(as')+iii1iI[il1ii(0x1b1,'j0z3')]),(iii1iI['msg']?.[il1ii(0x27c,'*u2e')](i1i11I['vTSwq'])||iii1iI['msg']?.['includes'](i1i11I[il1ii(0x2df,'Bx8c')]))&&($['runEnd']=!![])):(lIIiiI[il1ii(0x29c,'O(as')](II1lil),IIli1l&&(lIIii1[il1ii(0x29d,'z(mX')]=!![])):console[il1ii(0x22f,'UrKY')]('❓'+IiiliI+'\x20'+JSON[il1ii(0x1e7,'s@pv')](iii1iI));break;}}catch(il1iI1){'uAhHj'===i1i11I[il1ii(0x1b4,'P))J')]?IIli1i[il1ii(0x2da,'uD5^')]=!![]:console[il1ii(0x33f,'s@pv')](il1ii(0x24a,'uD5^')+IiiliI+il1ii(0x286,'&O%^')+(il1iI1['message']||il1iI1));}}async function ililIi(iIIiil){const llI111=i1ii1;if($[llI111(0x33c,'oa0L')])return;let i1l1Ii='',I1iIIi=null,I1iIIl=null,lI1IIl=i1i11I['TfBwL'];switch(iIIiil){case i1i11I[llI111(0x29e,'z(mX')]:I1iIIi={'completionFlag':!![],'sourceCode':i1i11I['UojcA'],'encryptProjectId':$[llI111(0x230,'q&w[')],'encryptAssignmentId':$[llI111(0x32b,'5lW#')]},i1l1Ii='https://api.m.jd.com/client.action?client=wh5&clientVersion=1.0.0&appid=redrain-2021&functionId=doInteractiveAssignment&body='+i1i11I['JsuQB'](encodeURIComponent,JSON['stringify'](I1iIIi));break;default:console[llI111(0x2d9,'pOj0')](llI111(0x311,'P))J')+iIIiil);return;}const i1ilI={'url':i1l1Ii,'method':lI1IIl,'headers':{'Accept':llI111(0x2fd,'ig]x'),'Accept-Encoding':i1i11I['jLWLq'],'Accept-Language':llI111(0x34b,'oh9v'),'Connection':'keep-alive','Content-Type':llI111(0x263,'vt8)'),'Cookie':Iiili1,'J-E-H':iIIiiI,'J-E-C':I1l11i,'Origin':i1i11I[llI111(0x1ba,'&Ggz')],'Referer':llI111(0x23f,'z(mX'),'x-rp-client':i1i11I['LtTtN'],'Sec-Fetch-Dest':i1i11I['zvwZO'],'Sec-Fetch-Mode':i1i11I[llI111(0x309,'fnsC')],'Sec-Fetch-Site':i1i11I[llI111(0x308,'!I7]')],'User-Agent':II11li},'params':I1iIIl,'data':I1iIIi,'timeout':0x7530};i1i11I[llI111(0x346,'HgLI')](lI1IIl,i1i11I[llI111(0x21f,'RUh6')])&&(delete i1ilI[llI111(0x266,'P))J')],delete i1ilI['headers']['Content-Type']);const iii1lI=0x1;let i1ilI1=0x0,Iiilii=null,Iil1li=![];while(i1i11I['Axfru'](i1ilI1,iii1lI)){if(i1i11I[llI111(0x2eb,'RUh6')]===llI111(0x247,'#Y4['))I1lliI[llI111(0x2f0,'14fw')](llIllI+llI111(0x1e2,'j0z3')+I1ilI1[llI111(0x2d2,'HgLI')]('+'));else{const Iil1ll=await common['request'](i1ilI);if(!Iil1ll['success']){if(i1i11I['ruZcV'](llI111(0x297,'Wl1d'),llI111(0x296,'zMY*'))){Iiilii=llI111(0x259,'lUX2')+iIIiil+'\x20请求失败\x20➜\x20'+Iil1ll['error'],i1ilI1++;continue;}else{llIIli['runEnd']=!![],lIII1I[llI111(0x273,'gblU')](llI111(0x1c8,'q&w['));return;}}if(!Iil1ll[llI111(0x2f5,'z(mX')]){if(i1i11I[llI111(0x332,'O(as')](llI111(0x34a,'#Y4['),llI111(0x26e,'O(as'))){Iiilii='🚫\x20'+iIIiil+llI111(0x26a,'*u2e'),i1ilI1++;continue;}else IilIli=li1[llI111(0x201,'xPXH')]||'',illIl1=l1llII[llI111(0x1ad,'iDZu')]||'';}liiI1i(iIIiil,Iil1ll[llI111(0x320,'$6v$')]),Iil1li=![];break;}}i1ilI1>=iii1lI&&(console[llI111(0x211,'y8pW')](Iiilii),Iil1li&&(i1i11I[llI111(0x29b,'14fw')]!==i1i11I['lPQJo']?I1l1Il['runEnd']=!![]:$[llI111(0x2b5,'s@pv')]=!![]));}}async function handleResponse(IllIiI,i1il1){const i1iIiI=lill1I,I1l111={'Vmdde':function(IIii1l,I1iIII){return IIii1l+I1iIII;},'XkqMs':function(liiI11,ililI1){return liiI11*ililI1;},'cvkpH':i1iIiI(0x2e1,'14fw'),'uxRZW':function(IIii1i,i1ili){return IIii1i!==i1ili;},'LYySx':i1iIiI(0x295,'bCq7'),'wbICE':i1iIiI(0x344,'[aU!'),'dMgXQ':function(Iiill1,I1iII1){return Iiill1===I1iII1;},'zPIpJ':i1iIiI(0x20e,')ucZ')};try{if(I1l111['uxRZW'](I1l111[i1iIiI(0x2b1,')cKx')],i1iIiI(0x32a,'pGtX')))switch(IllIiI){case I1l111[i1iIiI(0x289,'j0z3')]:if(i1il1[i1iIiI(0x1f8,'*u2e')]===0x0&&i1il1['data']){if(I1l111[i1iIiI(0x23b,'5lW#')]('jKWYJ','zgAkq'))$[i1iIiI(0x2ac,'O(as')]=i1il1[i1iIiI(0x21a,'14fw')];else{Iil1I1[i1iIiI(0x31a,'pOj0')](i1iIiI(0x1dc,'&O%^')),Ii1iII['log'](l1i11I[i1iIiI(0x1bc,'zMY*')]()),II11II[i1iIiI(0x25d,'0ZaG')]['push'](Ii1iI1);return;}}else i1il1[i1iIiI(0x2a8,'0@6t')]?console['log'](i1il1['message']):console['log'](JSON['stringify'](i1il1));break;}else return I1l111['Vmdde'](lIII1i[i1iIiI(0x1ef,'P))J')](I1l111[i1iIiI(0x217,'pGtX')](l11i11[i1iIiI(0x2c1,')ucZ')](),IilIl1-lIII1l)),l1iIIi);}catch(iii1l1){I1l111['dMgXQ']('IaujT',I1l111[i1iIiI(0x1af,'&7kJ')])?console[i1iIiI(0x2b7,'j0z3')]('❌\x20未能正确处理\x20'+IllIiI+i1iIiI(0x1da,'iDZu')+(iii1l1[i1iIiI(0x239,'P))J')]||iii1l1)):(delete ll1li['data'],delete Illl1I['headers'][I1l111[i1iIiI(0x24e,'Bx8c')]]);}}async function sendRequest(II11ll){const IlllI1=lill1I,liiI1I={'YGamQ':IlllI1(0x1f0,'QjY9'),'dQEgq':IlllI1(0x348,'HgLI'),'udIAJ':IlllI1(0x253,'vt8)'),'HSIve':IlllI1(0x27e,'bCq7'),'jPhlk':'application/x-www-form-urlencoded','uyVvu':IlllI1(0x2d0,'iZhc'),'ZPgME':IlllI1(0x1b3,'xPXH'),'XuaqE':IlllI1(0x1f3,'*u2e'),'PgQbi':function(lill1i,il1li){return lill1i>il1li;},'TMUBp':function(iIIill,iilii){return iIIill===iilii;},'ZkFXM':IlllI1(0x2fe,'gblU'),'mIiqM':function(Ill11i,iilil,Ill11l){return Ill11i(iilil,Ill11l);},'xIjrq':function(il1ll,i1ilIi){return il1ll>=i1ilIi;}};if($[IlllI1(0x28a,')cKx')]||$[IlllI1(0x2b5,'s@pv')])return;let ililII='',lI1II1=null,i1ilII=null,iIIii1=IlllI1(0x26d,'QjY9'),IllIi1={};switch(II11ll){case liiI1I[IlllI1(0x1f5,'HgLI')]:ililII=liiI1I[IlllI1(0x2f8,'iDZu')],IllIi1={'body':{'api-version':'1.1.0'}},i1ilII={'functionId':IlllI1(0x276,'q&w[')},lI1II1=IlllI1(0x2f2,'RUh6');break;default:console[IlllI1(0x258,'q&w[')](IlllI1(0x31f,'iDZu')+II11ll);return;}const lilIII={'url':ililII,'method':iIIii1,'headers':{'Accept':liiI1I[IlllI1(0x291,'$6v$')],'Accept-Encoding':liiI1I[IlllI1(0x333,'Bx8c')],'Accept-Language':'zh-Hans-CN;q=1,\x20en-CN;q=0.9,\x20zh-Hant-CN;q=0.8','Connection':IlllI1(0x2a6,'owii'),'Content-Type':liiI1I[IlllI1(0x1d4,'Bx8c')],'J-E-H':$[IlllI1(0x275,'$6v$')],'J-E-C':$[IlllI1(0x1c3,'xPXH')],'Host':IlllI1(0x24c,'gblU'),'Origin':IlllI1(0x25c,')ucZ'),'Sec-Fetch-Dest':liiI1I['uyVvu'],'Sec-Fetch-Mode':'cors','Sec-Fetch-Site':IlllI1(0x2a7,'gblU'),'User-Agent':$['UA']},'params':i1ilII,'data':lI1II1,'timeout':0x7530};iIIii1===liiI1I['ZPgME']&&(delete lilIII[IlllI1(0x320,'$6v$')],delete lilIII[IlllI1(0x2ed,'zMY*')][liiI1I['XuaqE']]);const Ii1ilI=0x1;let II11i1=0x0,iliIil=null,iliIii=![];while(II11i1<Ii1ilI){liiI1I[IlllI1(0x206,'iZhc')](II11i1,0x0)&&(liiI1I[IlllI1(0x294,'P))J')](IlllI1(0x32d,'s@pv'),liiI1I[IlllI1(0x1fc,'z(mX')])?i1illI[IlllI1(0x1ce,'pGtX')](IlllI1(0x238,'zMY*')+i1IIl):await $['wait'](0x3e8));const lill1l=await common['request'](lilIII);if(!lill1l[IlllI1(0x2d4,'#wmK')]){iliIil=IlllI1(0x26b,'zMY*')+II11ll+IlllI1(0x1b7,'gblU')+lill1l[IlllI1(0x290,'zMY*')],II11i1++;continue;}if(!lill1l['data']){iliIil=IlllI1(0x2aa,'y8pW')+II11ll+IlllI1(0x304,'&Ggz'),II11i1++;continue;}await liiI1I[IlllI1(0x28d,'$6v$')](handleResponse,II11ll,lill1l['data']),iliIii=![];break;}liiI1I['xIjrq'](II11i1,Ii1ilI)&&(console['log'](iliIil),iliIii&&($[IlllI1(0x2f4,'iZhc')]=!![],$[IlllI1(0x301,'y8pW')]&&$[IlllI1(0x1e3,'Wl1d')][IlllI1(0x330,'xPXH')](iliIil)));}async function jsonurl(i1iiI){const I1il11=lill1I,i1ilIl={'mZSOh':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_2_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.3\x20Mobile/15E148\x20Safari/604.1\x20Edg/87.0.4280.88'},llI11I=await common[I1il11(0x305,'#wmK')]({'url':i1iiI,'method':I1il11(0x1cc,'uy@&'),'headers':{'User-Agent':i1ilIl[I1il11(0x2cd,'0@6t')]},'proxy':null,'debug':![],'timeout':0x7530}),Il1i11=llI11I[I1il11(0x1db,'!I7]')];return Il1i11;}function random(iii1li,Iil1i1){const lI1l11=lill1I,IIii11={'uBpXA':function(iliIl1,Ii1il1){return iliIl1*Ii1il1;}};return Math[lI1l11(0x1f9,')cKx')](IIii11['uBpXA'](Math[lI1l11(0x325,']&Yv')](),Iil1i1-iii1li))+iii1li;}function Iii11l(){const II11i=(function(){return[...[iｉl,'YuExjAsXgjYBLiaYmKiAe.OPcCuXomOY.IyKvAp7==','WR1bW6Perwao','ESkzW6bulG','WPhcGmk5smovW50','WQBdOZJcJCoWWRCqWQ43l8kKWPNdTSkeFra','WPvzlvdcLmoVsCoFCJddRMqzWQ/dOLfsW4RdLvNdNa','WPZORlJMSPJLKjBLU6tdQG','W5/cGmodxq','5BwH6kYW57Yg6ls16l+t6l+s6koN5B2t5yIb6lEQ5y+m','8kk1V8ki5lIz6lcB57MM5y6A6zIe5BsY57IB57MD5P6Q','WOxcTCk+WRWXWQ/cTG','b2XxWRWhiW','WOtdNrpdP8o6W5S','W5pcLCodtmkYW7VcISk+W6mHmConh3xdUSolWQ/dOr7cRG','57U/5y6g6zQVjSoC','W5qHx8kGWQdcHJq','44gb5OY656AD44gX6k2E5ysu6i2c5y+3m8kOW5ZdP8otW64','W5HUrKu','WQaaWOml','gh1lWRiDlmoJWOFcKG','WRq7qmk4WQZdPmk2WP0','44oR6lsA5y6/','W73cHmkoWR8f','WP11W68','CSoQkxJcMxzHW5eiWQOt','W4VcN8kWWQZcGa','W5RcGSodvCk3WQJdKCoOW4yHmG','rmk+W4ZdJCky','kCkCW44fW55UWRzohSkHW5RdQW','eCkwySoPW73cKq','W6XKCa','jxxdVfyhW73cGMRdK8kCW4BcLq','fLWhW78NWPa','W6xcHZCYoG','WRddUtRcI8o8WRq','W5XGqK4','bxxdTKC','W6zNEmkYWRy','W7W/lmo8','W682WQtdU1r6nmoGW53cR8khfmopcd3dICk6efNdU2ytW7O','WQZcJSklwSoD','WOpdSJFdHCoo','cNxdTq','wmoaFJP1dq','a2ZdKu0mW6FcKYNdSW','oSktW6nnha','bJC7oxhdImo9WPVdUGC','shJdSgbUWOdcUG','jCklW5uhW4WOWOy','jmkid2JdUepdOCopW5hcVMm','jGldUCoxna','W4mJe8o/W6a','WQ3dRdBcMG','t8oeEanv','qZ3cNHCbW5ddO8kOWQRcHa','WRRdSCkErrimtWG','W6jKDSkVWQddRmkcWQdcQSocWQG','imkRW65KgG','WR/cSSo3wMW','6AoW5y6Z5AAz6lAqz8oK','i37dPclcSG','umojWQu','imkic3NcGuxdVSod','6lwn5y++5PEz5PAt','lc8kE8odz0HZ','6lED5y+l5PAO5Pw8','kmktW7Tvhba','mCk1qmkmWRe','5AA66lwg77+i','wd0aW6PbC8k4W5hcS8kshq5kzq','W7/cMSk7WP4','pCkfW4a','WRpcQ8kxtSoP','rCkiW4NcVq','WPDmW5fCvW','WOFdUCk/xIS','W6HUDSk5WQhdJSkq','W57cJ8ob','nsSgA8ofA0H5cSoDartdI35upmokW5NcN8otda','WQG8W4fdWRy','WPCLxhG4','WQznW6DOwq','pSoIm3/cLa','msekyq','kcmleSkUAG','W4/cOhiMamo6W4C','gmkDEG','WOyXEe51WOlcGmow','57IB5y2b6zUeW6NdOq','o8oQpW','dCk/rCkG','nYee','W64nWRfEWQ/dR8oMWQyxF8k4W6m3W5rvua','W6ldUWNcQgbRW595','lSowWPxcKru','pmkzW4a','WOysW4D7WOLnW6hdNW','W7NcKGyOoG','W5utpudcR8oMv8kFvJddJ24AWRFdLeD+W4RdLxBdOemEWQnnWQJcNW','bhZdKxah','4P6Uu+IgQEACTUI8IEIHOoMdKUwkH+s6REMvGEIVRXa','t8k3W5ddKCklWOZcVW','W5hcSZe','f1pdGq7cJW','W4ZcTaKVaSkp','W7/dOq8','aCkBW7/cVXX1WRSJW6Dx','WP7cKCk5CSoJWQreaSkghSk7W5hcRJvMt8osW5lcKZa','WQ7dRc/cNmoH','m3hdPwGU','5B6I5yMx5AEE5zoh5BEn6lYO5yMp5y+r5PAu5lIk6zQC','WRrRWR0','WPzzo0FcP8oTqq','W5i/WR19sW','jCkKW7uhW60','W7bxtgro','W4/cImoAwq','eCkOwmkKWRxdSSoojqSOu0C','4P69oUAEOUIdU+ATNoEJUowLU+EqHSkk','deRdVJe','xSovy15DA8kEWPZcJCkir8o5','W5FcJSoq','z0Tpm8ov','WR7dRmkA','WRy/jSoTW7xcHCovWQpcImoNWPFdK8oo','W7SRnSoGW6m3WPxcSW','ySkzW5e','W5X6bW','EqfzWRS','WOJdKmkcc8o5W7tdImotW6SCeSkW','W6aVmCoZW4m2','tSk9W4q','W6CmWRu','8kI4R8oh','WOBcPSoXwa','aCo6tg1qmY8','WP7cP8o2qeVcGcaVf8oUfSksbtbyW6SHW6tdOmoz','W5FcNCk9WR3cNrTDWR9mACo2W7uZW444W4KpqmozASov','amkWuSkTWRFcPmoOoq'],...(function(){return[...['cfJdVdO','emkNsmk4W6/cJCoazWeQgMGJW5/cPbW','WOSDW5b2WQXiW7ddHa','kCooBry+','WPCLxvW8W4vLWOfjfchdGSo8imobWOdcNrFcQ8obWRTRW75XW6GOW6m/WPfjW7zlWQa','ECo0WPldTxa','W5GNBSk3WOG','rSkZW5FdGW','6Ak65y2W5AEZ6lANg2G','sCojFbz7','WQRdOZJcK8o8WQmbWO0','rUIVREAZKowKK+I1H8kZ4P2Qz+AvP+wqQow4OUAwGoAnOW','8yE7Mmkt','6lwB5yYe5PES5PEg','aCkLW7q0','WRNdOHpdQSoB','wmkCW47cTN0','WOqGq3u7W4i','4PIzzoIhHUwTIEs6IoI8SEIGNEMvUEMzSEAxMoMuHUITUoE/IUMvMoISNW','44k55OYz56sM44gw6k6B5yEE6iYj5yYpChTbW6qvma','u8okBq','WOaCW5jOWR18W7tdHuO1CW','W6pcJfq','W7mvWRTjWQhcRCorWPKlDSk7W6e','dJWqp3VdGCo7WP/dQX0FxX/dPvRcOSoLoSkLW6m3lexdQvne5O6W5yMv5BUc5y2357Mr56QQ5PA+77676BUw6k23WRNVViFMNRZLPRiPW7q','WP7dIGxdLmof','WRFcRSkzzSoL','lmoACa','umoCyafD','d3tdSu4xW7FcKZq','a8k6BSkZWQFcPmoFkWWGcbbzW5tcLHJdSJpcK8oJqmoFW7GuWORcHmkv6iwX5A6h5lU16l236kgJ6zsf6zMh5PwA6zw/776z6BMk6k2psmk5nW','fmoLvgGzyd/dHCkvf23cRNW2WOVdKSoC','W6LLDmkXWRhdMmkgWQe','W4/cUSk5WRGvWRNcRW','W7ZLP5tOT6JVVi7LJi/LMB7VVBe','WPJdJrJdHSogW5RcH8kkWQ45WPtcQbaVWRlcJsroWP5haq','WPRcVmoL','vmkEW47cVgnC','WRnWW4XExa','WRpORBNMSkRLKiVLUOaI','mhhdIfXU','WRGhtfuh','kSoHdL/cUq','W7j+ECkyWQRdMa','t8oZzZTv','rGDlWQnJW4pdMSobmbNdRSoPgq','W4tcGhu2iq','gwxdL2nsWOhcT8o7W7ldUHddLCkHWOuMrq','BHvpWPLdWOpcQW','WOCbW4f1WQS','W5ZcRvugjG','iSk1W6fWfq','W7GkWPzouSoVWRRcGSkWWP42la','DSkFW7BdOmkA','bCoQBKfD','WOeNW7LYWRe','W5OqzSk7WQK','WPOWq1CHW44','WO3dLCkgdmoWW7JcK8oGW5aBeSkTfW','imoUv2b/','W7FcQ8kEWRve','WPRdHXO','WPNcKmk5rmo8W78m','WRNcJmkbACoh','lfiFW6SvW5FcHrtcKmkcWPxcRW','eqervSo4','gSkjzCo+WQxdMCkmW4HwWOhcI0BcTZ/cSSkSiW','WRZcOmko','rW5bWQvLW4ddMmkMq0VdP8oia27cUu4XW45HW6dcHmo7WQNdG8oWlchdOHlcQSoNW6BdKSoBWQJcTG','dCkvW7LvhaX+dcHQjCkS','W5dcPtG4h8kj','fSkwACo+WQtcMmkeW4rgWOG','tmoezXuDkSkgWPhdHmkcrG','W6eVlmoNW5y5WP0','W67cICkJ','8jcyJCoI','W7aRW6pcVGqMdmkHW53cMCkojq','WO7dNHtdH8oJWO3cQCkkWRy6WR7cOa','W5xcRJuZhSkfW7aY','uIaCb0ZdImon','W47cHSo+v8kO','WQxdPcm','W4XsBSkoWRW','FCkEW59ub8kYir3dTx/cMvO','beldVYdcVCoN','umkNW4/dHW','bhXnWP0FkSoT','W7jUymk8WRBdMmkqWPVcPCojWRq','mCoSia','W5RcISk9WRJcUXS','W7ijWPno','xmktW5NcUwbDWORcUW','AY9uWP1D','kYG1z8oT','W7pcSmoXECka','8kkJNvpLJyFNJ6hKUzNOSQJNUlpLJB7PMPRVVORLJ5NLSABLViRLPjFOV7JOOjRcRa','W5VcQSkUWPCFWQ3cTCoTWPK2nv1aEq','WPVdGrm','WOtcSSoSvfFdLW','W5iHvCkG','4PUEioIfIEwUSos5TEI8VEIIKUMvOEMyG+AvJ+MuGoISHEE+U+MxUEIUPW','ct08pN/dGSom','W63cQ8k/WOOK','W6agWQTF','W68LmCo3W5yQ','eCkCAW','nCo6Be9J','j8klz8obW54','ESkFW4jDdG','uSkZW5hdKCkp','W6eqdmoBW58','WOhdHHFcI8oJ','W4TMrNjr','eWJdMmobja','bmk7qSkYWQpcP8oO','W5BcRZ8X','WRe6l8oQW7dcJSoxWPVcOSo4WORdLmok','WOHjk1FcO8o5vW','W4pdPdVcThW','WPZdJci','DSoiEJL9','8l+pPZFLHQZORAxcNa','WRXlW74','WP5VW7Xau8o3ga','WRz4WRJdU2L/kSkQ','zmoDwZZdPXtcOCkwW67cRM9/lJK','W61QzW','vvHwimoE','CffDimoN','dhxdJw9sWOK','W5JcLmkHWOTonCoqW5ZdH2SJW4u','W6zQFSkXWPBdMCkuWRpcUColWQG','WPNML77MJiBMN6ZOJQpLJ5tMIRVLIP/VVydORlVMO7VMNAZNVBRNUlxMMidLKk7MRORLUyhVVB9xWQCDBCkum+AzGowsLEADTUAuNq','Afjd','uYlcOrvqWQlcRXldPCkFW4lcLa','W4KOWP5yWRW','t8kHW4q','WO8sW4D5WRe','WRpKUQtKU4tOSOdNURBLJiFPMypMTlVLI6tdHG','k8kiW6vocW'],...(function(){return['WPFdPSkLxH0','W4hdVen2qSkMWPddQq','WOOwW5j+WRXEW6y','nCkmbwtcU3JdUSolW5m','5AEh6lAn772N','W7FcLmkO','w1hdTZpcMCoWta','WR/dSSkjffDosbrqbKNcHmklWO/cT8kXW44luqJdUMyQpHHyuCk5W4tdL8ovWR0UxG','W7hcN8kqWO1op8o2WPddUNXHWPaPWQtdQ8kEW6S9dXFcISoZDhm','grddNmoZmCkLW7G','WPlcHmk5yW','WOCDW5bOWQbCW6hdTLGRAx0cWOlcICosvSo/wq','wCkHW5LFdq','W5JcNSkFWRWb','dK7dVtpcRmo9','W6NcJSkHWRPfpW','bhZdSJ/cJW','CWviWR5+WOlcOXxcTmk0WR3cLbZcKCotW5b5DWawaq','WQbPWQhdO1r1jSk7W6BcPCklxSojca3dJCoYC0ldS3miWRT/smoBpmk2AXKYWPrt','uCoCyqHJ','iCkhECk2WQS','W5ORqSkWWPxcGcldPG','uCodWRhdSuaVW6m','jmohyq','FmknW6RcVee','yEITNUAXLEwLJEI1NGNIN79I5PEz5zg55BM25Pso5OYt','WOLzouhcO8o5ua','m8kgeepcPq','j8kuW7rndazVuG','W73cHCo9EmkU','pxKMW7SI','f8oIWPm','WPFdIWNdI8oIW5BcNSkCWO0UWRS','kSkdqmo0W7W','Cbnk','WOqAW4S','WOGaW5PuWRa','xUs4QUs4J+IXRoE6NUwpQoMyTUA2RUwiV8kZ','4P2UW7lMNONNNyFORj3MSQNdUG','W6WgWQz4WR/dSSo3','W5BcKSoq','eNW4W64H','nmkPW6WyW5K','j8oIFIWH','tXHKWPLp','WRtdUaFdQ8oo','WOpdMHe','WRznW6e','WO4CW5q','WR1zgwpcKa','rmosWOtdTuy','b8o2uh0','4P+WW6/MN7dNNl7OROFMSOJdVa','W43cQgGM','f8o+sxK','uGLHWRf7','uSkyW5tcGfq','4P2ihEACJUIcVUAVVUEIQEwMSoEqUmkp','r8kCW5tcSxPu','W5zGw0O','nYSnAmoJzG','mmkcl0JcGG','o8kmdgRcOuq','hmk0wCkNWRm','b0xdScBcOCoLuIHOadi6wCkDW6NcSmkYWQfw','rmkOW7pdJmkp','kgfsWQ4e','WROGW5j7WR4','WPS0xq','kmktW68','hLehW7mJWPtcJCoLeH3dQa','WOtdNsFdGCoc','tg5TnCo4','W5/cRYqS','5B2x5yMW5AwY5zkc5BwV6l255yQe5y+V5PAr5lIK6zIY','WPK9r3/cNa','W6GRd8o4W7S','W4VcGmoft8kK','n8oEu05W','i8kpW5abW5S4WOzOhSkHW5W','dX8jk1G','otKlmCkPAq','fNtdL1OgW4ldSCo2W7JdNrRcLCoNW5v/ccLHW6NdQtrciCoGcmkMFSoxWRtcImkzCmkvWQ3cJCojh0j3ptO1','W4C5WQS','b2zE','Bvnhl8oOWQpdKu0','W60cWRTaWOtdUSoLWPCxDmkH','WPbVW7XUumoKpg/dJMu','lCogCa','l8kFc2JcOH7dKmojW5JcSwr0','bmomWOldOIelW5VcGCkqld9+Aq','W6RcKa4mpG','8kIDR2FLHA3ORz0U','W5tcTciVgmoBWRPUW7dcSCk7jaCBWRbLcJ7cUCkWW7pcLmoMetZcImoCWPtdOxpdLbLJWPpdR8kFW594dKJcLSoYt8k0WOjiWRNcPsa4uN51lSoUWPr4WPP0W5egWQHquSoDhSoOW5yjcWX0W55EWPNcVSkhh8kZCdHal8kxcuRdU8kABSk5W5FdISowW7aKi8o7sSoyWQlcGmoFDCo0rIedsSkunComtSo1kmopWO00vtxcQ3fFWRldJSoDFCoZqd/dQSolrq/dGSoHWQRcUCoOeNeehg4KeKHheMJdSIhcMq/cGwhcQqHUW73cPmklWPSFWPxdICoHWPDJy3yWtvBdLZNcTSk7gSkmWQJcGCkrkLdcOCo+W44nBqDEhCorWP7dI8k1CH47uXRcKq0IraS5qCorqMK4qsXzWRa2W4ldJSkEWQn2yKrxWOldM8kCWPSZWPKiWPyShc/dQeTzjHpcMwzdASomWORdHr40WRddUGVdJatcPmkrWRD3dSkaWOTlW53dTmolpmkvWQxdSrv9WOZcIeyAzdFdP8k7WONcTx3cQ8oWqdCNEHLgzftcSmodp8kzW6D1WONcQCkRqSo7WPldJ30XW5hdPtVcV8oPW7pdV2VdNqpcQSkKbshdNYmmWPTkn2aam8ocWOldLNJcQbNdM8kiW4S5WOPEiCkgWORcISkMaSklmmkZaCoyESkcW7eAy8oVW5fczmo6W4ndWQnkW7pdSJLKW4vrWQRdPCoKW5ldUSkAWQuYW4GGhCo1bKLNd8o8ttHvWQ7cR2LZsbzciZrVeb7dISofWRG2dLjEW5JdKvauW6GhCtCMW4y7W6bIBdH2WR98lSkVW4vHW47dQYJdS8k5WQVdUSkZWQrYcufiW692W6BdR8k9cg3dQYhdMf3cTGnKgZpdVmkwaCoJbw1qDwS8cqWUWPfLlCkPW6FdGJlcJvHuW7pcTmokxclcIqRcI3XeWRKrWPmREmkxW7TPW64SWOjprYpdKHxcLKKzW5pcImkXkComtCk9WRfptSoBnmk+t8okgmkhd388nmkrW6pcI37cI1v1WQJdJGxcMYZcHmoHa1BcK8o7W43cVmkqW5VdHCo8W71NtstdU8kgW7PzW6SpW4JdPCkUWOJcQgP6wCkwW6xdLuVcSYe/W7NcLxaktsPXWOCGnmkkW5n7yIFcMIZcHtVcRK4mW4ienhFcGLVcGr3cGmkICNn+wSkyWROXWQ7cMSkavehcV8kBxLuidCo7W7hdQSoQchhcHmk1W7RdHLFcM0NcVCkxs8ofW6fvaSkDr8ovysn1e2hdMZeDkmkxxCkacWNdHmk6WQJcTSk2wZCoW4/cLMCQDXf5W5eqWQuwW4zaW7e9WQ0fWRhcPmkyzfyXbh1XWR/cHvBdTMBdN8olW6BcOKlcGZpcGmk4WOOBWQlcGLCqW6NcK8kFW73dU1BcGSkTWPvQxftcHCkgW7lcG8oxWPtdPYddP8onWO9LWRNdGCoHWRaxWQpcGmkEdGtdSSo4W4upzYVdKx1wWONdLWlcN3SEuCoJWQVdNSkOWRtcSCkQbmkKkCkFW6ldKSksWQ4quCkbsmkWrCkxEK4aW4BdPa','bs07jxhdL8oQWPhdPHy','W71lqwns','hJbIdLdcICotWPBcUqiqxWpdRsNcS8oJC8kXWR9JCv3dQHKkoItdTSkDWP/cNmo+WPK5W7/dRwxcKCoas8o/BSoCWRy/WQy','W5WQwG','cJ0QkuZdGmoeWPhdTbzUaelcV2ZcS8oejSkKW6CR','W57cOmkUWQ8FWQFcImoMWRi2','WRmhsNRcQ8kJzezJW4tcIG','bfddQLP2','dKtdTa','mmoWia','h8kwA8oNW6FcRCkbW4bv','cCk/W4m','vmkgW6FdJ8k8','WPq6qLWWW4DQ','WPnOW7bKBq','h+ITKUAXIowLGEI0LwxINAJdMa','W6FdHr3cLxe','d3tdPKCqW7lcLtpdRSkkW5G','cmopqWSv','W5JcKSo8rmkR','WOuwW4DtWRDaW7ZdMu4BB3qyWORcGSoi','5lUT6loV6zU/','4PY/WR/OHkFMNltOV6xOOiZPGjZLIPdKUBxPLAlOR6pdKa','WPpcI8kPvSo5W7mo','b3NdT0OaW6RdHhFcTCouWOBdIt/dRG','W5xcRIi6gCkaW7y1W7JcRSk8','uSkGW4BdPSkfWPZcTg1gWOVdSbVdUgO1','bmk/W5q','Ea5B','5y6t6yAd6k6r5PM6W7OWCg7cLCkYx1SNWOa','W5rUvvXq','WOykA3pcJa','5AA66lwg77+E5Rsx5yM+5BwT57Mb5P6P5OMZ5lID5A6k5z6U','n8kfW50xW6q','W6OaWPbiWP8','psCpE8oYFa','WOtdIa8','wmoazcjrk8kqWPFdJSk4xmoMEeNcRa','bCkXvG','WPvEWRpdHha','W5pcNmkhWQVcQHPIWRftySkhWQPUWPqoW4iPwSouACou','ef7dVrhcTSoX','rSkNdI8hCqldTCkraxJcVG','WPDtl3hcTmo4','BM1ml8o2'];}())];}())];}());Iii11l=function(){return II11i;};return Iii11l();};async function redRainurl(iii1ll){const II11l=lill1I,IIliI1={'gkMEW':II11l(0x1e4,'QjY9'),'ZxkOW':II11l(0x2a4,'xPXH'),'WpLzu':'项目未开始','fzPne':II11l(0x33e,'vOWW'),'xtFwg':'DyiUt','BPzIZ':'fKiPZ','GgFzl':'Zdcij','HYHwi':'hbxvQ'},il1lI={'url':iii1ll,'method':IIliI1[II11l(0x32c,'P))J')],'headers':{'Cookie':cookiesArr[0x1],'User-Agent':$['UA']},'timeout':0x7530},IliIIl=0x5;let I1il1l=0x0,lI1l1l=null,IIliII=![];while(I1il1l<IliIIl){I1il1l>0x0&&await $['wait'](0x3e8);const Ill11I=await common[II11l(0x25b,'bCq7')](il1lI);if(!Ill11I[II11l(0x280,'iDZu')]){lI1l1l=''+Ill11I[II11l(0x2ea,'xPXH')],I1il1l++;Ill11I['status']&&([0x193,0x1ed]['includes'](Ill11I[II11l(0x1f6,'uy@&')])&&(IIliII=!![]));continue;}if(!Ill11I[II11l(0x22e,'pGtX')]){if(II11l(0x1ed,'0ZaG')==='wJfFc')illIll[II11l(0x1e3,'Wl1d')]['fix'](iIli1I);else{lI1l1l='无响应数据',I1il1l++;continue;}}if(Ill11I[II11l(0x321,'bCq7')][II11l(0x2e8,'zMY*')](/(活动已经结束)/)&&Ill11I[II11l(0x254,'lA@x')][II11l(0x240,'uy@&')](/(活动已经结束)/)[0x1]){$[II11l(0x1d1,'5lW#')]=!![],console[II11l(0x258,'q&w[')]('失败，活动已结束或不存在');return;}let I1il1i=Ill11I[II11l(0x1db,'!I7]')]?.[II11l(0x26f,']&Yv')](/__api_data__ *= *(\{.*?\});/);if(!I1il1i){if(IIliI1[II11l(0x31d,'y8pW')]===II11l(0x29a,'bCq7'))lilIl1[II11l(0x233,'QjY9')](i1l1ii[II11l(0x1f7,'#Y4[')],IIliI1[II11l(0x328,'[aU!')]),i1l1['exit'](0x1);else{lI1l1l=II11l(0x2e3,'&O%^'),I1il1l++;continue;}}if(I1il1i){if(II11l(0x2fb,'5lW#')==='JBmlz')IilliI[II11l(0x23d,'&O%^')]('❓'+IlI1ii+'\x20'+lIIiii['stringify'](iI1lli));else{let llI11l=JSON[II11l(0x338,'!I7]')](I1il1i[0x1]);for(let I1llIl of llI11l?.['floorList']||[]){if(II11l(0x316,'&Ggz')!==IIliI1[II11l(0x318,'O(as')])iii1I1=0x1;else{if(I1llIl?.[II11l(0x274,'zMY*')]?.['interaction']){if(II11l(0x223,'zMY*')!==II11l(0x2a0,'UrKY'))Ii1iIi=iliIIl[II11l(0x1cb,'UrKY')]((IIii1I,llI11i)=>!ill11I['needRemoveCookieIndex']['includes'](llI11i+0x1)),iliIIi[II11l(0x282,'O(as')]=[];else{let i1iIi1=JSON[II11l(0x2cc,'P))J')](I1llIl[II11l(0x20c,')cKx')][II11l(0x1c1,'HgLI')]);if(i1iIi1?.[II11l(0x1d8,'uy@&')]&&i1iIi1?.['encryptAssignmentId']){if(IIliI1['GgFzl']!==IIliI1['GgFzl'])delete IIliI[II11l(0x326,'#Y4[')],delete ilI1ll[II11l(0x220,')cKx')][IIliI1[II11l(0x2ca,'owii')]];else{$[II11l(0x1b9,'*u2e')]=i1iIi1,interaction['push']($['interaction']);break;}}}}}}if(!$[II11l(0x331,'fnsC')]){let I11i1I=llI11l[II11l(0x2b2,'dlbU')]?.[II11l(0x200,'*u2e')]||'{}';var iiliI=JSON[II11l(0x209,'gblU')](I11i1I);let iliIi1='',l1l1ii='';iiliI&&iiliI[II11l(0x202,'oh9v')]&&(iliIi1=iiliI[II11l(0x2cb,'dlbU')]||'',l1l1ii=iiliI['bottomText']||'');lI1l1l=II11l(0x281,'z(mX')+iliIi1+II11l(0x1e6,'vOWW')+l1l1ii+'\x0a',I1il1l++;continue;}}}break;}I1il1l>=IliIIl&&(console['log'](lI1l1l),IIliII&&(II11l(0x278,'O(as')===IIliI1[II11l(0x2ff,'pGtX')]?$['outFlag']=!![]:(l1lIil[II11l(0x283,')ucZ')](IiiIli+II11l(0x218,'q&w[')+iillli[II11l(0x27a,'&Ggz')]),(I1l1Ii[II11l(0x30d,'lA@x')]?.[II11l(0x261,'zMY*')]('项目未上线')||I1i11i[II11l(0x2e7,'P))J')]?.[II11l(0x27f,')cKx')](IIliI1[II11l(0x30c,'owii')]))&&(llIlii[II11l(0x270,'vt8)')]=!![]))));}var version_ = 'jsjiami.com.v7';

// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
