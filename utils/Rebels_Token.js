/*
主要获取 isvObfuscator token值

获取签名，自定义使用方法如下

  - 请求 API 获取

    export JD_SIGN_API="" # 接口地址，例：http://127.0.0.1:3000/api/getSign，默认 'http://api.nolanstore.cc/sign'
    export JD_SIGN_API_BODY_FIELD="" # body参数字段名，默认 'body'
    export JD_SIGN_API_FUNCTIONID_FIELD="" # functionId参数字段名，默认 'fn'
    export JD_SIGN_API_METHOD="" # 请求方法，默认 'POST'，自定义仅支持 'GET'
    export JD_SIGN_API_CONTENT_TYPE="" # 请求头 'Content-Type'，默认 'application/json; charset=utf-8'，支持 'application/x-www-form-urlencoded' 格式
    JSON响应格式解析的字段目前仅支持 `body` `convertUrl` `convertUrlNew`

  - 本地自定义脚本生成

    如果存在本地签名生成脚本则会优先加载本地签名，具体规范如下：
    - 1. 需要将脚本命名为 Rebels_Sign.js 并存储在与 Rebels_Token 脚本同一目录下
    - 2. 调用函数名为 genSign 并且需要 export 导出
    - 3. 函数固定两个传参，分别是 functionId（函数id） 和 bodyParams（body参数对象）
    - 4. 函数需要返回含有 body、st、sign、sv 等关键字段的url参数形式的签名字符串

  不管通过何种途径获取签名，最终需要的签名形式为url参数格式且至少包含 `body` `st` `sv` `sign` 字段



new Env('Rebels_Token');
*/

var iｉl='jsjiami.com.v7';const Iil1lI=iii1II;function iii1II(_0x53a24b,_0x3ed7d1){const _0x2a68e6=Iii11l();return iii1II=function(_0x24ac61,_0x49b349){_0x24ac61=_0x24ac61-0x188;let _0x57b4b2=_0x2a68e6[_0x24ac61];if(iii1II['XoMkdZ']===undefined){var _0xd1752=function(_0x174224){const _0x4010c0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5b6f08='',_0x671f9d='';for(let _0x225c51=0x0,_0x525019,_0x5d747e,_0x4a6521=0x0;_0x5d747e=_0x174224['charAt'](_0x4a6521++);~_0x5d747e&&(_0x525019=_0x225c51%0x4?_0x525019*0x40+_0x5d747e:_0x5d747e,_0x225c51++%0x4)?_0x5b6f08+=String['fromCharCode'](0xff&_0x525019>>(-0x2*_0x225c51&0x6)):0x0){_0x5d747e=_0x4010c0['indexOf'](_0x5d747e);}for(let _0x2680bb=0x0,_0x597cf5=_0x5b6f08['length'];_0x2680bb<_0x597cf5;_0x2680bb++){_0x671f9d+='%'+('00'+_0x5b6f08['charCodeAt'](_0x2680bb)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x671f9d);};const _0x44522b=function(_0xeec85b,_0x183f04){let _0x55db4f=[],_0x54a7bb=0x0,_0x5e47eb,_0x816d90='';_0xeec85b=_0xd1752(_0xeec85b);let _0x5ed2b7;for(_0x5ed2b7=0x0;_0x5ed2b7<0x100;_0x5ed2b7++){_0x55db4f[_0x5ed2b7]=_0x5ed2b7;}for(_0x5ed2b7=0x0;_0x5ed2b7<0x100;_0x5ed2b7++){_0x54a7bb=(_0x54a7bb+_0x55db4f[_0x5ed2b7]+_0x183f04['charCodeAt'](_0x5ed2b7%_0x183f04['length']))%0x100,_0x5e47eb=_0x55db4f[_0x5ed2b7],_0x55db4f[_0x5ed2b7]=_0x55db4f[_0x54a7bb],_0x55db4f[_0x54a7bb]=_0x5e47eb;}_0x5ed2b7=0x0,_0x54a7bb=0x0;for(let _0x59fdda=0x0;_0x59fdda<_0xeec85b['length'];_0x59fdda++){_0x5ed2b7=(_0x5ed2b7+0x1)%0x100,_0x54a7bb=(_0x54a7bb+_0x55db4f[_0x5ed2b7])%0x100,_0x5e47eb=_0x55db4f[_0x5ed2b7],_0x55db4f[_0x5ed2b7]=_0x55db4f[_0x54a7bb],_0x55db4f[_0x54a7bb]=_0x5e47eb,_0x816d90+=String['fromCharCode'](_0xeec85b['charCodeAt'](_0x59fdda)^_0x55db4f[(_0x55db4f[_0x5ed2b7]+_0x55db4f[_0x54a7bb])%0x100]);}return _0x816d90;};iii1II['jiKHvc']=_0x44522b,_0x53a24b=arguments,iii1II['XoMkdZ']=!![];}const _0x381fe9=_0x2a68e6[0x0],_0x4b4f11=_0x24ac61+_0x381fe9,_0x2eae67=_0x53a24b[_0x4b4f11];return!_0x2eae67?(iii1II['wKxddH']===undefined&&(iii1II['wKxddH']=!![]),_0x57b4b2=iii1II['jiKHvc'](_0x57b4b2,_0x49b349),_0x53a24b[_0x4b4f11]=_0x57b4b2):_0x57b4b2=_0x2eae67,_0x57b4b2;},iii1II(_0x53a24b,_0x3ed7d1);}function Iii11l(){const iilli=(function(){return[...[iｉl,'gjkUsJgVjWLiQQaSmriOQ.XMYcdouxXm.bvp7EgE==','W5zmDG','4P+9W7ddHmkxW4tcJ8kBDmkPi3ldH350W4FcIoI9V+AoMow9Oow7He3INi5S','WQVdRmkNn07dKxdcK8k6wG9NWQhdUexdHowqOUEuLs3cQdpdVguwW5VcQSoEWR7KUkxNKz7MS6tKUQVNK58L5Ps3WOdcU2FdILL2W5RdUmkqaX7cQ8kdwSkEW7G','W5dcM8oVqmoV','5BEw6kYD572A6lA66lYf6l+56kcm6kYV6lso5y6s776v5yEW5BcU5Bk36jAD77+I','W7hdV3G','W4BdNMxcRw4','W4LGEdBdUa','WQlcUZVcUrJcJSolW7ldLbJcLCkJoGpcHSotW5j8n8oKW5FcQaDIW4e+FNzVW6ldHSoGW4aNmsTSW6i+t8oObdhcK2X+W6/cT0NdVW3dLs0/WRH+pLzuW4a','wCkrua','zgu/tJi','8ysPLSo3WP9VaaxcT8oUWPyGcUEUNEwsQUIoP+woKUwMQEI0KW','dXdcPxnv','E3KMAXK','WPpcRmoNWQBcImkpWRC','pSoKWOzYAmoDWOKFdq','heeGWQzQdSkPWO03Aa','WPfPW4qcvG','WQtdQ8oYv0W','W486WOS','W6pcQmo3','W6TpWOapW4mrW5m','s8kRhq','4PYqa8oCWP7dQxZdO8kvW7pcVSo45lQv55oh5QIc5z+V5yQR6l+85AA36lAxW47INknF','WO3cPSoX','qCkxwKVcTCoBW6tdHeG','W4lcNCkOnmoX','8lQRI8otWRNdSqZdGCknhYxcJ8o96k6I5Ro/5AE46lECtUkEPJtMLBZLKzNLUlFMLOVMJjG','W6fTWRijW7m','W6vyWPyDW5ytW7u5ttCtDa','W7XnWQCqW5y','8kAiGsldGhnkW7TWW6T3s3VMJOBLJB3LK5ZLU7hLV77LURWi4P2bWQxOT7pLJiFMLAZMLii','W6CsWPZcPSoTo8o6WOWskCkg','W4lcQCkPpCo2WPqi','WPRcLSkDWQTN','W6rOfSkycY/dJG8ZlwZdQSkbAa','BeGpAte','W5tcVSov','W6BcVSoqECoyWQmA','WOBdLSohCMq','FCosW43dKJFdOSoPW5rNWQLNFa','sK9kW7ddMSkYWQH3','W6dcGmo1WPBdJCo4g8okWPj8r8kCWPFdJaZcMa','4PYcFItdMCkzWRqXhdNcHCkG6k6/5RgD5AEZ6ls1W6BINitdVW','WPL9WRSx','r8oUEWZcLq','WPRcP8kpWP59','ieqsWP9w','W6iboSkQW48','rSkBqW','buLIW5vdW7xcUmozetG','W4viw8kd','W6tdU8kRWOdcIW','jSkHlXS','W5GYbq','gLjK','W6FcPCorECoyWQKrWOvZWQe','WORcK8kH','kZa1','x8oAvSk2wmoJW4S','W7VcICocWQtdVa','W5dcOmokW5ZdNCo1WP57W6iUpCo4','W545prWeaCoXWRi','CeRdOIVcQw3dMMW7FhyLW7y','c0JdN8kWW6u','WPGKySobDG','W7izwCkwWPTOWQWK','c8kveSoRhCkMW4JcL013wSos','lCkiWPlcI2lcTCoy','W67cT8o5','4P20qCooW4/dUMKXW4FcT8k+WRjHkJJcTtNMQ6JLNQxLI7NOVyRLPPVOTQDW4PYucW','pCklhcTh','W6vEWRBdVmkR','psOIW47cMCktcr4OWOm','W4BcLmoYu8oLWOi+WRq','E8oeut3cKLSVWRjrjSoYW7yiWPhdH8k8BSo0dCkjWR3cLwtdU3ey','sSowECkPq8o5','W4dcMCohWQZdIq','h8oNWRLAkG'],...(function(){return[...['bNeqWRX8','bmoACSolF13dJMVdQx1lDfVcS2ysWOVcQu7cSSo3WRJdNCo5oc7dRSkgrCkKqaddGa','W4mHDmk/WPe','F8k6AgFcQSoKW5BdUxmNW780qSk9ccT+WP3cQmkRz8kgW4JcIuW','lmoqWQbfCG','W7/cTCo/W5ldGSoJW4OLWQH/W6W','zSoZzcpcTW','W61MA8k2WQS','y8oNBK4/W6KsW47cMc/cVM3cLq','WOVcQCksWQ1z','qW0ZWP8cWRFdN8ofdWirx3W','WQyYoCoGW49oWOdcQ8ooW6VcH1O','zCoXzY3cQq','EmoVWOlcJINcQIa8','cfaVWOfF','W7e1c8kkW58ZW7tcPSoR','smoRWOdcRSkL','u1ngW6tdLSkvWQjQEmk6Da','W6ZdMSkAWPRcGW','8jEQIGNdU8okWQlcMwT1WRz9W67dQCoYW6xcVeZNV7hLRlpOR5dLJ7pLP7BOTBRcJ+kDNui','o8omWO8','vmorwZhcU2OVWQrodmo6','xCoosCk7s8o7WPxcMwv4v8obW6/cKIZdQY/cOmoWW4mgWQO','WPqOASohEq','lSo5WPu','uejTW6/dTW','W53dTuZcQuy','W6rlWR7dVmkS','W5iUfSkBWRbYW7pcQ8oOu8oKt1/dSsDpWP0','W4hcO8kT','E8oEW4xdNtxdPCkCW6HKWOXCsCkT','W5rtzsJdHG','4PYwzSk1tKzjW4pcNZ3cV8ks5lM055cE5QIA5z655yUK6l+F5AE+6lA+f+kCVuO','B3BdOHmhlmkCWOeYWOpdUSoWva','W59nzW','W7NcGSkPcSor','W7bPFG','W7bQrSk+WPK','wmkFxKa','BCkzueVcKa','cbxcJwjHs8oZWQaxWPRdT8ozr2VcVaVdUSkwW4rJW6GNuSoLWQ/cLsGYWQW','zCoZWPtcHW','t8ksCu3cJq','WOvuW5qQua','oSkiWPFcGgK','W7jIFmkDWRO5','W6jiWRFdSCkmW4qnWRX0','W7/cPSoKW4i','4PYPWOPLW4jIASoaDmoLFaujrSo6EbBOVklMJkhLVkRLU6xcPEkDICoq','WRRcRdVcUrJcJSolW7ldLbJcLCkJoGJcKmoxW5PImSo1W5pcVXP7W5S','W5iXdr8m','e1n1','W6bdWP8zW4WxW5SW','vSonqq','W58WimkhW6y5W73cKCo4dCoA','iSo5WOb6sCoqWOej','W63cMCovwYi','4P+aW4hdOCkhW6ZdNXhdTCkEFWlcNCkgW4KiWPVOVOhMJQtLV53LUzNdVUkERZW','W4SGW6DCWOjjW7tdVSocoqym','WOhcKSkG','nINcTq','r0bDW70','lZxcT2DBCmofWOa','cCkUcq','W6aqWQiZW4rtySkUWQ/cN8k2ba1prSkmqMXoW4hcNb9fE8oiAaxdGmo4WOaIWP/cKG','WR9GWOqzW5K','iHBcRW','WR0YxCoE','4P+Bg+AmGUs8JUEzNos5JUErPUwFQEwDH+AxRoAxVE+9SUI0LEI8N+wqHEExKLVcTK3dS8oCW44VtSoeWRhKU5NNK7tMS6tKURtNKlK','WQddK8o3vK83WOTrW6BdQe89WRHrdsLzW5hcSSoojJjdyqe','W5WKWRezW7y','igWvWRHj','W5xdLfdcH3/dKCoojqVcRvFdPCkukCkKWQ/dMSooWQ3dUX7dLmoHW47dLWNcTSo7','t05o','WR0PwSoAtchdKrGDkLBcGmkfhYJcUCoBm8oKWRhdR8kVuIJcNCkFymorAJjpWPNdRCofWQVcQtCkeaJcSSkmwmkNWOhcNNXxW4LFW74egmkNW70zWRuebG','W50pDCkVWRe','W6hdOmkuWOJcJa','trldJmooW5Pum8ojWQe','WOpcKSkW','FCoTrmk1ta','W4xcN8kkjSo9'],...(function(){return['W6b6WOaqW48','etKMW4JcVCksmq8LWQJdRYz5WQT3WPhdSCkRf8kyW5BcRXemhSop','W6SfwW','W7bAWR8FW4m','ib3cRq','p8oAWOW','W4VcRColWOtdNG','W41hWQCxW7atW6m','W53cV8oe','oSkoWPhcGeVcV8obW6DA','zqH8W6KJqmodW5L+pCkhW41NsbL85zcr55A+W5uAW6tdVYxdQ0H2dSk55lUQ55gu5Rgt5lQ655ctpEAwQ8kdASkEt8kSWONcIK/cTSonvY8NqffI','WRKYsq','lgLMW711','W5/cRXdcIq7cS8oZ','WPLLWRypW4eDW4FdVCoKnGSF','W5K7ga','W6aqWQiZW4rtySkUWQ/cN8k2ba1axCkeqhzFW4hcKXbCymodAa7dGmo6WOeZWOG','vqtdMSozW69AoW','z8o9xdVdUmolWQGkn8kaWRbuWP5MWPDPcCkEneRdRCkieCk6kmkZW7Xv','x8oAuSkRs8o0W4ZcRgTWxmogWRtcKs7dTa','W7JcImoRWOFdLmoIe8o3WO8','nmo3WOLhha','emoDWQGVfG','W6lcVmol','t3O7vYNdU24','4P2HWPLKf8oFW4NcMduDWQxdLuJcPe7cPfhMQAlLNPBLI4tOVB7LPPlOT7j34P2Vra','8loQIsaHW5yEWRpdSt/dLt8m5O2Q5yY35zcg5BIj5B6+5BUQlUkFImkY','AmotWOFcTbq','W4RcOSkS','W6PfWPq','8jg4IqBcVK/dO8oSWPDPEfFcLEwFQowNToErHEAmOEwoUowqNUw4KoAvH+MaOowlQUs4SEMxLoIUP3RINBW8','iXBcR3ddSXJcI2mDEfONW5lcSKBdHeO','ASo0CWtcUW','W74zptKTpmoeWRNdVmkZW68gW7ZcJvOxW6KLWPTxWRFdGa','W7OfWOdcRCo1h8oW','W5G8eqqRgCo+WRNdMSkvW48BW5FcVguO','WPZcMHFcHa','W5lcV8ohWPC','WP/dPCoBBh0gWRe','mmkGi8kJuq','pIS3','x8omua','W6ChimkIW48eW4JcMSobDmoaDwxcJvvIWRD5W5LFW57cPmogW7G9W7nfq8o2EaTgWOxdJCkpW4JcSx8','W7dcVmooC8od','aCoMWRqhp8o/A8k/WPDJpxRdSSohWQ0lW6XRW6pcGNLtWR/cS2y4gZu','W7HIE8kKWP4DWQa','kxNdO8kDW6O','amk5gSkusv7cH8kPoCk+k2NcTSkNW69f','WQxcUCkiWRfziG7cJmokWRGlzmk8W7vvamorzCkXkIrEW59VWOFdSSk4fq','W4asocOp','qSoBEsxcSa','rerDW4ZdNCk5WRv9x8k3D8k8W57dPmoYWOjwWPydALxcRG','W5nlWR45W5S','FmoKWPlcKt3cQsa','W7jvWQq','W794WPuQW6O','W7NcV8kikmoE','vmoJALpcJb0hamkogSoigmo6','4P2OWOntlmk2Fs/cOu0lWR3KUBVNKAJMQ5NLN7FLIyVOVBRLPRhOTyddQokDHCor','W7zfWOei','W5SCfSk9W48','kCkQeIJdPa','W7BcNmoUWPtdTG','W5RcGSktjmou','vSoxWQBcHCks','amoSuCo0Dq','W6FcHSoNE8oo','imk0W5NdKgJdUNv3W6xdL3FdImoOfq','W7pcVSonySooWOqqWO52WRZdUG','rSoiWQ7cIq','W73dUSkwWQxcICkveNm','WPVcV8k6WPjH','5yQ75PwrW5lcJCoZW64q5lM955o9whlVV5u','b8o0WQiwlq','jZaGW5dcMmkeoWq','WRPEW4KUv8oF','ocFcOu5CFmobWPe','l8kfmCkVE2VcRmkPh8kyc1tcNCkkW5H+W5XCu8kgW4VdLCkUoCkGWQVdRhhdV3DNWPZcQSkXuq','W6NcPSo8W5NdNG'];}())];}())];}());Iii11l=function(){return iilli;};return Iii11l();};(function(i1i11I,il1iIl,iii1ii,il1iIi,iii1il,II11li,I1l11i){return i1i11I=i1i11I>>0x5,II11li='hs',I1l11i='hs',function(iIIiiI,liiI1i,ililIi,lilIIl,ililIl){const II11l1=iii1II;lilIIl='tfi',II11li=lilIIl+II11li,ililIl='up',I1l11i+=ililIl,II11li=ililIi(II11li),I1l11i=ililIi(I1l11i),ililIi=0x0;const liiI1l=iIIiiI();while(!![]&&--il1iIi+liiI1i){try{lilIIl=-parseInt(II11l1(0x1ce,'qXYZ'))/0x1+-parseInt(II11l1(0x19c,'fxOE'))/0x2+-parseInt(II11l1(0x21e,'&3yL'))/0x3+-parseInt(II11l1(0x25c,'Oigk'))/0x4+parseInt(II11l1(0x19e,'VmQq'))/0x5+-parseInt(II11l1(0x1b2,'Oigk'))/0x6+-parseInt(II11l1(0x1ec,'qXYZ'))/0x7*(-parseInt(II11l1(0x257,'wHF#'))/0x8);}catch(i1l1II){lilIIl=ililIi;}finally{ililIl=liiI1l[II11li]();if(i1i11I<=il1iIi)ililIi?iii1il?lilIIl=ililIl:iii1il=ililIl:ililIi=ililIl;else{if(ililIi==iii1il['replace'](/[VgxYkbSULMrXdQpOuEWJ=]/g,'')){if(lilIIl===liiI1i){liiI1l['un'+II11li](ililIl);break;}liiI1l[I1l11i](ililIl);}}}}}(iii1ii,il1iIl,function(i1ill,I1l11l,lilIIi,i1l1Il,llIli,i1i11l,i1i11i){return I1l11l='\x73\x70\x6c\x69\x74',i1ill=arguments[0x0],i1ill=i1ill[I1l11l](''),lilIIi=`\x72\x65\x76\x65\x72\x73\x65`,i1ill=i1ill[lilIIi]('\x76'),i1l1Il=`\x6a\x6f\x69\x6e`,(0x171f5a,i1ill[i1l1Il](''));});}(0x1820,0x92331,Iii11l,0xc3),Iii11l)&&(iｉl=Iii11l);const path=require(Iil1lI(0x1c3,'ZIvr')),common=require('./Rebels_jdCommon');let scriptName=null,expireMinutes=0x1d;try{let tmpMinutes=parseInt(process[Iil1lI(0x1ac,'vWN[')][Iil1lI(0x1d4,'SXVV')]||'29');expireMinutes=tmpMinutes;}catch{}const defaultCacheTTL=expireMinutes*0x3c*0x3e8,TokenCache=new common[(Iil1lI(0x1a3,'oDPt'))](process[Iil1lI(0x1b8,'XAii')][Iil1lI(0x197,'QEPS')]||__dirname+'/token.json',defaultCacheTTL,0x2bf20),lzkjPinFilter=(process['env'][Iil1lI(0x1f7,'n)YY')]||'')[Iil1lI(0x225,'%rZA')]('@'),lzkjPinFilter_interactsaas_and_interaction_v1=(process[Iil1lI(0x1b8,'XAii')][Iil1lI(0x23c,'Sn&S')]||process['env'][Iil1lI(0x1f5,'SXVV')]||process['env'][Iil1lI(0x232,'C1(2')]||'')[Iil1lI(0x210,'B[Ip')]('@'),lzkjPinFilter_interaction_v2=(process[Iil1lI(0x234,'HD!2')]['JD_ISV_TOKEN_LZKJ_INTERACTION_V2_PIN_FILTER']||'')[Iil1lI(0x1af,'Te%j')]('@'),cjhyPinFilter=(process['env'][Iil1lI(0x1dc,'cCaT')]||'')[Iil1lI(0x210,'B[Ip')]('@');let requestAxiosProxyConfig,requestDynamicProxyConfig;try{const proxyAddress=process[Iil1lI(0x26d,'5t(1')][Iil1lI(0x1d9,'cjEL')]||process[Iil1lI(0x21b,'Te%j')]['JD_ISV_TOKEN_PROXY']||'';if(proxyAddress){const proxyConfig=common[Iil1lI(0x190,'Kr(d')](proxyAddress);proxyConfig?(requestAxiosProxyConfig=proxyConfig,console['log']('\x0a===============启用\x20getToken\x20代理池代理(新)==============\x0a')):console[Iil1lI(0x26b,'VmQq')]('❌\x20提供的代理地址无效，跳过启用\x20getToken\x20代理池代理');}else{const proxyApi=process[Iil1lI(0x259,'a7#6')]['RS_ISV_TOKEN_PROXY_API']||process[Iil1lI(0x20e,'s3$j')][Iil1lI(0x206,'*#7U')]||'';if(proxyApi){requestDynamicProxyConfig={'api':null,'proxyConfig':null,'useLimit':null,'timeLimit':null,'fetchFailContinue':null,'extractTimestamp':null,'lastUseTimeStamp':null,'usedTimes':null},requestDynamicProxyConfig[Iil1lI(0x1fc,'B[Ip')]=proxyApi;const useLimit=process[Iil1lI(0x247,'SXVV')][Iil1lI(0x211,'qO8U')]||process[Iil1lI(0x21b,'Te%j')]['JD_ISV_TOKEN_PROXY_API_MAX']||'0';try{requestDynamicProxyConfig[Iil1lI(0x22b,'n7T@')]=parseInt(useLimit);}catch{requestDynamicProxyConfig[Iil1lI(0x1d2,'ruLY')]=0x1;}const timeLimit=process[Iil1lI(0x1c7,'VmQq')][Iil1lI(0x1bc,'ruLY')]||'10000';try{requestDynamicProxyConfig[Iil1lI(0x24d,'QEPS')]=parseInt(timeLimit);}catch{requestDynamicProxyConfig[Iil1lI(0x1ee,'Oigk')]=0x2710;}requestDynamicProxyConfig[Iil1lI(0x204,'@feb')]=(process[Iil1lI(0x26e,'@0Hb')][Iil1lI(0x20f,'oDPt')]||Iil1lI(0x1bd,'RT4l'))===Iil1lI(0x269,'fxOE'),console[Iil1lI(0x1ea,'qO8U')]('\x0a================启用\x20getToken\x20API代理(新)================\x0a');}}const globalProxy=process[Iil1lI(0x1e9,'@feb')][Iil1lI(0x1c5,'Sn&S')]==='true';if(globalProxy)try{require(Iil1lI(0x1aa,'s3$j')),console[Iil1lI(0x1a8,'vo&U')]('\x0a===============启用\x20getToken\x20代理池代理(旧)==============\x0a');}catch(illlIl){console[Iil1lI(0x1a8,'vo&U')](Iil1lI(0x21f,'Kr(d')+illlIl[Iil1lI(0x212,'XAii')]);}}catch{}const redisUrl=process['env']['JD_ISV_TOKEN_REDIS_CACHE_URL']||'',redisKey=process['env'][Iil1lI(0x215,'5t(1')]||'',redisSubmit=!(process[Iil1lI(0x201,'^D[#')]['JD_ISV_TOKEN_REDIS_CACHE_SUBMIT']===Iil1lI(0x233,'ZIvr')),hasRedisKey=/<pt_pin>/[Iil1lI(0x209,'Sn&S')](redisKey);let redisClient=null;if(redisUrl){let redis=null;try{redis=require(Iil1lI(0x18d,'Te%j'));}catch(i11ill){console[Iil1lI(0x1e2,'5t(1')](Iil1lI(0x1fe,'n)YY')+i11ill[Iil1lI(0x1f6,'6GIl')]);}if(redis)try{redisClient=redis[Iil1lI(0x1f3,'qXYZ')]({'url':redisUrl});}catch(IIIIIi){console['log'](Iil1lI(0x235,'a7#6')+(IIIIIi['message']||IIIIIi));}}async function _redisCacheGet(IIIIIl){const IiiliI=Iil1lI,I1lIil={'VRmUT':function(lllll,i11ili){return lllll(i11ili);},'VNsDF':function(iil1l1,lllli){return iil1l1!==lllli;},'yRfVH':IiiliI(0x1e0,'n7T@'),'wqNxC':function(iiili1,ill11i){return iiili1!==ill11i;},'YfnOQ':IiiliI(0x18c,'fxOE')},IIIl1i=I1lIil['VRmUT'](encodeURIComponent,hasRedisKey?redisKey['replace'](/<pt_pin>/g,ptPin):''+redisKey+IIIIIl),liiII1=0x3;let IIIl1l=null;for(let lllill=0x0;lllill<liiII1;lllill++){if(I1lIil[IiiliI(0x1b7,'^D[#')](I1lIil[IiiliI(0x21c,'lPVu')],I1lIil[IiiliI(0x200,'RT4l')]))return lIIiiI;else{try{await redisClient[IiiliI(0x189,'Oigk')]();}catch{}try{if(I1lIil['wqNxC'](I1lIil[IiiliI(0x241,'LkuM')],IiiliI(0x1d5,'qXYZ'))){const I1lIiI=await redisClient[IiiliI(0x1d6,'@feb')](IIIl1i);if(I1lIiI)return I1lIiI;IIIl1l=null;break;}else return Iillil;}catch(IliiiI){IIIl1l=IliiiI['message']||IliiiI;}}}if(IIIl1l)console[IiiliI(0x23d,'QEPS')](IiiliI(0x1a7,'oQoW')+IIIl1l);return'';}async function _redisCachePut(Ill11,liiIII){const iii1iI=Iil1lI,li1i11={'CUxFA':iii1iI(0x1d8,'Te%j'),'TAIXA':iii1iI(0x217,'Kr(d')},iI11I1=Math[iii1iI(0x1c6,'*#7U')]((Date[iii1iI(0x1cf,'5t(1')]()+defaultCacheTTL)/0x3e8),il1i1l=encodeURIComponent(hasRedisKey?redisKey['replace'](/<pt_pin>/g,ptPin):''+redisKey+Ill11),IlIlll=liiIII,IIIl1I=0x3;let iil1ii=null;for(let IlIlli=0x0;IlIlli<IIIl1I;IlIlli++){try{iii1iI(0x1b3,'HD!2')!==iii1iI(0x21d,'^D[#')?await redisClient['connect']():(lIII1l[iii1iI(0x1a5,'oQoW')]=null,l1iIIi['lastUseTimeStamp']=null,lilIi[iii1iI(0x214,'C1(2')]=null,l1l11I[iii1iI(0x243,'vWN[')]=0x0);}catch{}try{await redisClient[iii1iI(0x265,'QEPS')](il1i1l,IlIlll),await redisClient[iii1iI(0x18f,'B[Ip')](il1i1l,iI11I1),iil1ii=null;break;}catch(lil111){if(li1i11[iii1iI(0x22e,'qO8U')]!==li1i11['TAIXA']){const ii1ii1=II11Ii[iii1iI(0x1e6,'@0Hb')](II11Il);ii1ii1?(lilIlI=ii1ii1,iIIIIi['log']('\x0a===============启用\x20getToken\x20代理池代理(新)==============\x0a')):iii1I1['log'](li1i11['CUxFA']);}else iil1ii=lil111[iii1iI(0x255,'^D[#')]||lil111;}}if(iil1ii)console[iii1iI(0x1b6,'HD!2')]('🚫\x20getToken\x20Redis缓存写入失败\x20➜\x20'+iil1ii);}async function _redisClientClose(){const llIll=Iil1lI;try{await redisClient[llIll(0x26c,'B[Ip')]();}catch(llllI){errorMessage=llllI['message']||llllI;}}async function getToken(lllil1,iil1il,ilil1I=!![]){const il1iII=Iil1lI,i11il1={'zgTlt':'🚫\x20getToken\x20接口响应异常\x20➜\x20账号无效','dTEUS':'global-agent/bootstrap','XoiNB':function(lllilI,ilil11){return lllilI(ilil11);},'ukJSm':'redis','ngxqF':il1iII(0x272,'*#7U'),'DLZiA':il1iII(0x238,'Kr(d'),'lBQTk':il1iII(0x1bb,'QEPS'),'PUEvp':il1iII(0x1ae,'cCaT'),'MyLkI':il1iII(0x22c,'5t(1'),'iDQhb':il1iII(0x258,'LkuM'),'AuDmF':il1iII(0x24a,'C1(2'),'cpfUy':'lzkj','MBCwQ':'tvCwW','LxANQ':function(illlI1,IIIl11){return illlI1===IIIl11;},'gGAuQ':'mQrzf','UaMEy':function(I1lIi1,liiIIi){return I1lIi1===liiIIi;},'vpLca':function(lil11I,Iliii1){return lil11I(Iliii1);},'VkZHP':function(iIiIi,iil1ll){return iIiIi!==iil1ll;},'uZXfw':'lGdHJ','jjCvx':'GnLDQ','uNIjC':il1iII(0x25b,'cjEL'),'ARSdk':function(iiilil,iil1li){return iiilil!==iil1li;},'lrXik':'OiAZW','jSPhj':il1iII(0x1f1,'VmQq'),'HDQWd':function(lillIl,iIiIl){return lillIl||iIiIl;},'ftYKr':'QnajU','GLMfF':function(iiilii,li1i1i){return iiilii===li1i1i;},'LRyfD':il1iII(0x19a,'Kr(d'),'whDFd':'JIQIa','GOblf':'JD4iPhone/167650\x20(iPhone;\x20iOS\x2013.7;\x20Scale/3.00)','fPslm':'zh-Hans-CN;q=1','cTaJR':il1iII(0x1b0,'oDPt'),'kLyNR':function(IlIli1,illIiI){return IlIli1<illIiI;},'zBxpK':il1iII(0x196,'@l$A'),'tOZZq':function(lI1lli,Ill1l){return lI1lli>Ill1l;},'LilNd':function(llI1Il,ii1iii){return llI1Il>=ii1iii;},'HbfZE':function(i11iil,Ill1i){return i11iil>Ill1i;},'cMOEW':function(ii1iil,lllI1l){return ii1iil-lllI1l;},'ILEyf':'DHpta','nHiVS':'HWtBw','VIFaj':il1iII(0x1a4,'%rZA'),'zlFct':il1iII(0x24f,'Wdhj'),'emNif':function(i11iii,llI1Ii,lllI1i){return i11iii(llI1Ii,lllI1i);},'xacaT':function(li1i1l,II1i1){return li1i1l!==II1i1;},'eFSSc':il1iII(0x23e,'LkuM'),'mlJiY':function(lI1lll,iIiII){return lI1lll===iIiII;},'ghuFQ':function(iil1lI,iiiliI){return iil1lI>=iiiliI;},'WkdKx':'🚫\x20getToken\x20在处理请求时遇到了错误','dSisc':function(li1i1I,illIii){return li1i1I===illIii;},'UVwXg':il1iII(0x1fb,'qO8U'),'ZeIuC':il1iII(0x264,'oDPt'),'dJEay':function(ii1il1){return ii1il1();}};let ii1iiI='';try{if(i11il1['lBQTk']!==il1iII(0x198,'vWN[')){const lI1llI=i11il1[il1iII(0x1bf,'NvyN')](decodeURIComponent,common['getCookieValue'](lllil1,il1iII(0x191,'s3$j')));if(lI1llI){if(i11il1['PUEvp']===i11il1[il1iII(0x275,'wHF#')])return Illl11['log']('🚫\x20getToken\x20请求错误\x20➜\x20获取动态代理地址失败，已设置跳过请求'),'';else{if(!scriptName){if(i11il1[il1iII(0x194,'KmW]')]!==il1iII(0x205,'Kr(d'))l1llII[il1iII(0x1e2,'5t(1')](IilIll);else{const iiillI=require[il1iII(0x1ba,'QEPS')][il1iII(0x1c8,'lPVu')];scriptName=path[il1iII(0x231,'ruLY')](iiillI,i11il1[il1iII(0x1ab,'wHF#')]);}}if(ilil1I){let l1l111=[];if(iil1il[il1iII(0x25d,'oQoW')](i11il1['cpfUy'])){if(i11il1['MBCwQ']==='tvCwW'){if(scriptName[il1iII(0x244,'KmW]')]('jd_lzkj_v2_'))i11il1[il1iII(0x192,'!5fx')](i11il1[il1iII(0x250,'lPVu')],il1iII(0x24e,'^D[#'))?l1l111=lzkjPinFilter_interaction_v2:I1llii[il1iII(0x24c,'P15a')](il1iII(0x1cd,'!5fx')+(lilIll[il1iII(0x21a,'RT4l')]||l1i111));else scriptName[il1iII(0x18e,'@0Hb')](i11il1['ngxqF'])?i11il1[il1iII(0x219,'lPVu')]('yERye',il1iII(0x1db,'KmW]'))?iliIIi[il1iII(0x1d0,'ruLY')](il1iII(0x18b,'6GIl')+ill11I['message']):l1l111=lzkjPinFilter_interactsaas_and_interaction_v1:l1l111=lzkjPinFilter;}else i1l1I[il1iII(0x1ee,'Oigk')]=IiilIi(IiilIl);}else iil1il[il1iII(0x22f,'@0Hb')](il1iII(0x260,'qXYZ'))&&(l1l111=cjhyPinFilter);if(l1l111['length']>0x0&&(l1l111[il1iII(0x1cb,'vWN[')](lI1llI)||l1l111[il1iII(0x1a1,'RT4l')](i11il1[il1iII(0x1da,'SXVV')](encodeURIComponent,lI1llI)))){if(i11il1[il1iII(0x246,'cjEL')](i11il1[il1iII(0x262,'5t(1')],i11il1[il1iII(0x213,'J2xY')]))try{IIII1I=Iii111[il1iII(0x251,'lPVu')]({'url':l1l1II});}catch(II1il){Ii1iII[il1iII(0x1c9,'s3$j')](il1iII(0x1c4,'H6v*')+(II1il[il1iII(0x207,'Wdhj')]||II1il));}else return console[il1iII(0x248,'ZIvr')](i11il1['DLZiA']),'';}ii1iiI=TokenCache['get'](lI1llI)||'';if(ii1iiI){if(i11il1['UaMEy'](i11il1['jjCvx'],i11il1[il1iII(0x224,'^D[#')]))ll1i1=IIli1i;else return ii1iiI;}if(redisClient){ii1iiI=await i11il1[il1iII(0x1e8,'lPVu')](_redisCacheGet,lI1llI);if(ii1iiI)return ii1iiI;}}}}const illIil=await common['getSign']('isvObfuscator',{'url':iil1il,'id':''});if(!illIil){if(i11il1[il1iII(0x1a0,'Kr(d')](i11il1[il1iII(0x268,'n7T@')],i11il1[il1iII(0x1e4,'^D[#')]))return console[il1iII(0x26a,'*#7U')](il1iII(0x23f,'5t(1')),'';else i1II1=iIIl11['message']||l1l1I1;}let Ill1I=null,i11iiI=![];if(i11il1[il1iII(0x193,'vo&U')](requestAxiosProxyConfig,requestDynamicProxyConfig)){if(i11il1[il1iII(0x222,'&3yL')](il1iII(0x1cc,'iX$j'),il1iII(0x237,'B[Ip')))IilIlI[il1iII(0x202,'lPVu')](i11il1[il1iII(0x252,'lPVu')]);else{if(requestAxiosProxyConfig)Ill1I=requestAxiosProxyConfig;else{if(requestDynamicProxyConfig){if(i11il1['ftYKr']==='EOxVx')i1ill1(i11il1['dTEUS']),iIIl1l[il1iII(0x1a8,'vo&U')](il1iII(0x236,'iX$j'));else{if(requestDynamicProxyConfig[il1iII(0x254,'Wdhj')])Ill1I=requestDynamicProxyConfig[il1iII(0x229,'B[Ip')],i11iiI=!![];else{if(i11il1[il1iII(0x1eb,'!5fx')](i11il1[il1iII(0x245,'NvyN')],i11il1[il1iII(0x270,'!5fx')]))lliilI=lili1[il1iII(0x254,'Wdhj')],ll1l1=!![];else{const lillII=await common[il1iII(0x218,'oQoW')](requestDynamicProxyConfig[il1iII(0x18a,'ZIvr')]),ii1ilI=common['_getProxyConfigWithAddress'](lillII);if(ii1ilI)requestDynamicProxyConfig['extractTimestamp']=Date[il1iII(0x239,'cCaT')](),requestDynamicProxyConfig[il1iII(0x1c2,'Te%j')]=0x0,requestDynamicProxyConfig[il1iII(0x199,'ZIvr')]=ii1ilI,Ill1I=ii1ilI,console[il1iII(0x1ed,'a7#6')](il1iII(0x22d,'!5fx')+ii1ilI[il1iII(0x1d7,'wHF#')]+':'+ii1ilI[il1iII(0x220,'lPVu')]),i11iiI=!![];else{if(!requestDynamicProxyConfig[il1iII(0x204,'@feb')])return console[il1iII(0x23d,'QEPS')]('🚫\x20getToken\x20请求错误\x20➜\x20获取动态代理地址失败，已设置跳过请求'),'';}}}}}}}}const lIli11={'url':il1iII(0x1de,'wHF#'),'method':il1iII(0x267,'XAii'),'headers':{'Host':il1iII(0x271,'a7#6'),'Content-Type':il1iII(0x195,'H6v*'),'User-Agent':common[il1iII(0x1a2,'KmW]')](lI1llI)||i11il1[il1iII(0x1e3,'s3$j')],'Accept-Language':i11il1[il1iII(0x1e5,'lPVu')],'Accept-Encoding':i11il1[il1iII(0x1fa,'vo&U')],'J-E-H':common[il1iII(0x230,'NvyN')](),'J-E-C':common[il1iII(0x1c1,'XAii')](lI1llI),'Cookie':lllil1},'proxy':Ill1I,'data':illIil,'debug':![],'timeout':0xea60},lllI1I=0x2;let lillI1=0x0,IlIlii=null;while(i11il1['kLyNR'](lillI1,lllI1I)){if(i11il1[il1iII(0x23b,'HD!2')]!==il1iII(0x1ad,'oQoW')){const lI1ll1=await common[il1iII(0x242,'P15a')](lIli11);if(i11iiI){requestDynamicProxyConfig[il1iII(0x208,'*#7U')]=Date[il1iII(0x1b1,'^D[#')](),requestDynamicProxyConfig['usedTimes']++;const iIiI1=i11il1[il1iII(0x216,'*#7U')](requestDynamicProxyConfig['useLimit'],0x0)&&i11il1['LilNd'](requestDynamicProxyConfig['usedTimes'],requestDynamicProxyConfig[il1iII(0x276,'@l$A')]),liil1I=i11il1['HbfZE'](requestDynamicProxyConfig[il1iII(0x1f9,'!5fx')],0x0)&&i11il1['LilNd'](i11il1[il1iII(0x261,'Kr(d')](Date['now'](),requestDynamicProxyConfig[il1iII(0x1f8,'s3$j')]),requestDynamicProxyConfig['timeLimit']);(iIiI1||liil1I)&&('bxWtP'==='aYcwM'?i1III=i11il1['XoiNB'](Ii1iIi,i11il1[il1iII(0x256,'5t(1')]):(requestDynamicProxyConfig[il1iII(0x1a9,'Kr(d')]=null,requestDynamicProxyConfig[il1iII(0x25e,'!5fx')]=null,requestDynamicProxyConfig['extractTimestamp']=null,requestDynamicProxyConfig[il1iII(0x1e1,'6GIl')]=0x0));}if(!lI1ll1['success']){if(i11il1['ILEyf']===i11il1['ILEyf']){IlIlii=il1iII(0x25f,'@0Hb')+lI1ll1['error'],lillI1++;continue;}else lI1Il1=lilIi1,IiilII[il1iII(0x248,'ZIvr')]('\x0a===============启用\x20getToken\x20代理池代理(新)==============\x0a');}if(!lI1ll1['data']){if(i11il1[il1iII(0x20c,'C1(2')](i11il1[il1iII(0x221,'oDPt')],i11il1['VIFaj'])){if(l1lIii['startsWith'](il1iII(0x1ca,'oDPt')))llIlii=llIlil;else IiiIli[il1iII(0x266,'VmQq')](i11il1['ngxqF'])?IIlil=ilI1lI:IiiIll=IIlii;}else{IlIlii=i11il1[il1iII(0x1be,'QEPS')],lillI1++;continue;}}try{const iiill1=lI1ll1[il1iII(0x1d1,'oQoW')];if(iiill1[il1iII(0x22a,'%rZA')]==='0')ii1iiI=iiill1[il1iII(0x1c0,'Oigk')],TokenCache[il1iII(0x20d,'@0Hb')](lI1llI,ii1iiI,defaultCacheTTL),redisClient&&redisSubmit&&await i11il1[il1iII(0x1b9,'XAii')](_redisCachePut,lI1llI,ii1iiI);else i11il1[il1iII(0x223,'a7#6')](iiill1[il1iII(0x20a,'a7#6')],'3')&&iiill1[il1iII(0x25a,'B[Ip')]===0x108?console['log'](il1iII(0x253,'H6v*')):i11il1[il1iII(0x19b,'XAii')](il1iII(0x263,'KmW]'),i11il1[il1iII(0x226,'H6v*')])?console['log'](il1iII(0x1ff,'HD!2')+JSON['stringify'](iiill1)):I1ilI1=iillll[il1iII(0x249,'lPVu')]||lIIilI;}catch(IIIII1){i11il1['mlJiY']('zgQTo','Unkkr')?ilI1li=IIliI:console[il1iII(0x1dd,'oQoW')](il1iII(0x203,'s3$j')+(IIIII1[il1iII(0x20b,'cjEL')]||IIIII1));}break;}else try{i1ilii(i11il1[il1iII(0x19d,'5t(1')]),iIIII1[il1iII(0x1e7,'@l$A')](il1iII(0x1ef,'KmW]'));}catch(II1iI){I1iIiI['log'](il1iII(0x24b,'J2xY')+II1iI[il1iII(0x1fd,'LkuM')]);}}return i11il1['ghuFQ'](lillI1,lllI1I)&&console[il1iII(0x26b,'VmQq')](IlIlii),ii1iiI;}else IlI1ii=lIIiii;}catch(lIli1l){return console[il1iII(0x1f4,'oDPt')](i11il1[il1iII(0x274,'J2xY')]),console[il1iII(0x1f0,'wHF#')](lIli1l),ii1iiI;}finally{if(i11il1[il1iII(0x1a6,'n7T@')](i11il1[il1iII(0x240,'ruLY')],i11il1['UVwXg'])){if(redisClient){if(il1iII(0x23a,'cCaT')!==i11il1[il1iII(0x1df,'@l$A')])await i11il1[il1iII(0x227,'B[Ip')](_redisClientClose);else return Iillii[il1iII(0x1d3,'C1(2')](i11il1['DLZiA']),'';}}else iIIl1i['log'](il1iII(0x1b4,'ruLY')+I1lllI[il1iII(0x255,'^D[#')]);}}module[Iil1lI(0x26f,'s3$j')]=getToken;var version_ = 'jsjiami.com.v7';